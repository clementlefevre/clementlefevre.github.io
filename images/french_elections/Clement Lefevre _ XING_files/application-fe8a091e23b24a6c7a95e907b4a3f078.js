(function(){"use strict";function t(){}function e(t,e){for(var i=t.length;i--;)if(t[i].listener===e)return i;return-1}function i(t){return function(){return this[t].apply(this,arguments)}}var n=t.prototype,o=this,s=o.EventEmitter;n.getListeners=function(t){var e,i,n=this._getEvents();if("object"==typeof t){e={};for(i in n)n.hasOwnProperty(i)&&t.test(i)&&(e[i]=n[i])}else e=n[t]||(n[t]=[]);return e},n.flattenListeners=function(t){var e,i=[];for(e=0;e<t.length;e+=1)i.push(t[e].listener);return i},n.getListenersAsObject=function(t){var e,i=this.getListeners(t);return i instanceof Array&&(e={},e[t]=i),e||i},n.addListener=function(t,i){var n,o=this.getListenersAsObject(t),s="object"==typeof i;for(n in o)o.hasOwnProperty(n)&&-1===e(o[n],i)&&o[n].push(s?i:{listener:i,once:!1});return this},n.on=i("addListener"),n.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},n.once=i("addOnceListener"),n.defineEvent=function(t){return this.getListeners(t),this},n.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},n.removeListener=function(t,i){var n,o,s=this.getListenersAsObject(t);for(o in s)s.hasOwnProperty(o)&&-1!==(n=e(s[o],i))&&s[o].splice(n,1);return this},n.off=i("removeListener"),n.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},n.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},n.manipulateListeners=function(t,e,i){var n,o,s=t?this.removeListener:this.addListener,r=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(n=i.length;n--;)s.call(this,e,i[n]);else for(n in e)e.hasOwnProperty(n)&&(o=e[n])&&("function"==typeof o?s.call(this,n,o):r.call(this,n,o));return this},n.removeEvent=function(t){var e,i=typeof t,n=this._getEvents();if("string"===i)delete n[t];else if("object"===i)for(e in n)n.hasOwnProperty(e)&&t.test(e)&&delete n[e];else delete this._events;return this},n.removeAllListeners=i("removeEvent"),n.emitEvent=function(t,e){var i,n,o,s=this.getListenersAsObject(t);for(o in s)if(s.hasOwnProperty(o))for(n=s[o].length;n--;)i=s[o][n],!0===i.once&&this.removeListener(t,i.listener),i.listener.apply(this,e||[])===this._getOnceReturnValue()&&this.removeListener(t,i.listener);return this},n.trigger=i("emitEvent"),n.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},n.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},n._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},n._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return o.EventEmitter=s,t},"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof module&&module.exports?module.exports=t:this.EventEmitter=t}).call(this),function(t){"use strict";var e=document.documentElement,i=function(){};e.addEventListener?i=function(t,e,i){t.addEventListener(e,i,!1)}:e.attachEvent&&(i=function(e,i,n){e[i+n]=n.handleEvent?function(){var e=t.event;e.target=e.target||e.srcElement,n.handleEvent.call(n,e)}:function(){var i=t.event;i.target=i.target||i.srcElement,n.call(e,i)},e.attachEvent("on"+i,e[i+n])});var n=function(){};e.removeEventListener?n=function(t,e,i){t.removeEventListener(e,i,!1)}:e.detachEvent&&(n=function(t,e,i){t.detachEvent("on"+e,t[e+i]);try{delete t[e+i]}catch(n){t[e+i]=undefined}});var o={bind:i,unbind:n};"function"==typeof define&&define.amd?define(o):t.eventie=o}(this),function(t){"use strict";function e(t,e){for(var i in e)t[i]=e[i];return t}function i(t){return"[object Array]"===l.call(t)}function n(t){var e=[];if(i(t))e=t;else if("number"==typeof t.length)for(var n=0,o=t.length;n<o;n++)e.push(t[n]);else e.push(t);return e}function o(t,i){function o(t,i,r){if(!(this instanceof o))return new o(t,i);"string"==typeof t&&(t=document.querySelectorAll(t)),this.elements=n(t),this.options=e({},this.options),"function"==typeof i?r=i:e(this.options,i),r&&this.on("always",r),this.getImages(),s&&(this.jqDeferred=new s.Deferred);var a=this;setTimeout(function(){a.check()})}function l(t){this.img=t}o.prototype=new t,o.prototype.options={},o.prototype.getImages=function(){this.images=[];for(var t=0,e=this.elements.length;t<e;t++){var i=this.elements[t];"IMG"===i.nodeName&&this.addImage(i);for(var n=i.querySelectorAll("img"),o=0,s=n.length;o<s;o++){var r=n[o];this.addImage(r)}}},o.prototype.addImage=function(t){var e=new l(t);this.images.push(e)},o.prototype.check=function(){function t(t,o){return e.options.debug&&a&&r.log("confirm",t,o),e.progress(t),i++,i===n&&e.complete(),!0}var e=this,i=0,n=this.images.length;if(this.hasAnyBroken=!1,!n)return void this.complete();for(var o=0;o<n;o++){var s=this.images[o];s.on("confirm",t),s.check()}},o.prototype.progress=function(t){this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded;var e=this;setTimeout(function(){e.emit("progress",e,t),e.jqDeferred&&e.jqDeferred.notify(e,t)})},o.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var e=this;setTimeout(function(){if(e.emit(t,e),e.emit("always",e),e.jqDeferred){var i=e.hasAnyBroken?"reject":"resolve";e.jqDeferred[i](e)}})},s&&(s.fn.imagesLoaded=function(t,e){return new o(this,t,e).jqDeferred.promise(s(this))});var c={};return l.prototype=new t,l.prototype.check=function(){var t=c[this.img.src];if(t)return void this.useCached(t);if(c[this.img.src]=this,this.img.complete&&this.img.naturalWidth!==undefined)return void this.confirm(0!==this.img.naturalWidth,"naturalWidth");var e=this.proxyImage=new Image;i.bind(e,"load",this),i.bind(e,"error",this),e.src=this.img.src},l.prototype.useCached=function(t){if(t.isConfirmed)this.confirm(t.isLoaded,"cached was confirmed");else{var e=this;t.on("confirm",function(t){return e.confirm(t.isLoaded,"cache emitted confirmed"),!0})}},l.prototype.confirm=function(t,e){this.isConfirmed=!0,this.isLoaded=t,this.emit("confirm",this,e)},l.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},l.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindProxyEvents()},l.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindProxyEvents()},l.prototype.unbindProxyEvents=function(){i.unbind(this.proxyImage,"load",this),i.unbind(this.proxyImage,"error",this)},o}var s=t.jQuery,r=t.console,a=void 0!==r,l=Object.prototype.toString;"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],o):t.imagesLoaded=o(t.EventEmitter,t.eventie)}(window),function(t){"use strict";function e(t){return new RegExp("(^|\\s+)"+t+"(\\s+|$)")}function i(t,e){(n(t,e)?s:o)(t,e)}var n,o,s;"classList"in document.documentElement?(n=function(t,e){return t.classList.contains(e)},o=function(t,e){t.classList.add(e)},s=function(t,e){t.classList.remove(e)}):(n=function(t,i){return e(i).test(t.className)},o=function(t,e){n(t,e)||(t.className=t.className+" "+e)},s=function(t,i){t.className=t.className.replace(e(i)," ")}),t.classie={hasClass:n,addClass:o,removeClass:s,toggleClass:i,has:n,add:o,remove:s,toggle:i}}(window),function(t){"use strict";function e(){}function i(t,e){if(o)return e.indexOf(t);for(var i=e.length;i--;)if(e[i]===t)return i;return-1}var n=e.prototype,o=!!Array.prototype.indexOf;n._getEvents=function(){return this._events||(this._events={})},n.getListeners=function(t){var e=this._getEvents();return e[t]||(e[t]=[])},n.addListener=function(t,e){var n=this.getListeners(t);return-1===i(e,n)&&n.push(e),this},n.on=n.addListener,n.removeListener=function(t,e){var n=this.getListeners(t),o=i(e,n);return-1!==o&&(n.splice(o,1),0===n.length&&this.removeEvent(t)),this},n.off=n.removeListener,n.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},n.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},n.manipulateListeners=function(t,e,i){var n,o,s=t?this.removeListener:this.addListener,r=t?this.removeListeners:this.addListeners;if("object"==typeof e)for(n in e)e.hasOwnProperty(n)&&(o=e[n])&&("function"==typeof o?s.call(this,n,o):r.call(this,n,o));else for(n=i.length;n--;)s.call(this,e,i[n]);return this},n.removeEvent=function(t){return t?delete this._getEvents()[t]:delete this._events,this},n.emitEvent=function(t,e){for(var i=this.getListeners(t),n=i.length;n--;)!0===(e?i[n].apply(null,e):i[n]())&&this.removeListener(t,i[n]);return this},n.trigger=n.emitEvent,n.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},"function"==typeof define&&define.amd?define(function(){return e}):t.EventEmitter=e}(this),function(t){"use strict";var e=document.documentElement,i=function(){};e.addEventListener?i=function(t,e,i){t.addEventListener(e,i,!1)}:e.attachEvent&&(i=function(e,i,n){e[i+n]=n.handleEvent?function(){n.handleEvent.call(n,t.event)}:function(){n.call(e,t.event)},e.attachEvent("on"+i,e[i+n])});var n=function(){};e.removeEventListener?n=function(t,e,i){t.removeEventListener(e,i,!1)}:e.detachEvent&&(n=function(t,e,i){t.detachEvent("on"+e,t[e+i]),delete t[e+i]}),t.eventie={bind:i,unbind:n}}(this),function(t){"use strict";function e(t){e.isReady?t():e.on("ready",t)}function i(t){var i="readystatechange"===t.type&&"complete"!==s.readyState;e.isReady||i||(e.isReady=!0,e.emit("ready",t))}var n=t.EventEmitter,o=t.eventie,s=t.document;e.isReady=!1;for(var r in n.prototype)e[r]=n.prototype[r];o.bind(s,"DOMContentLoaded",i),o.bind(s,"readystatechange",i),o.bind(t,"load",i),t.docReady=e}(this),function(t){"use strict";function e(t){if("string"==typeof n[t])return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var e,o=0,s=i.length;o<s;o++)if(e=i[o]+t,"string"==typeof n[e])return e}var i="Webkit Moz ms Ms O".split(" "),n=document.documentElement.style;t.getStyleProperty=e}(window),function(t){"use strict";function e(t){if("object"==typeof t&&t.nodeType){var e={};e.width=t.offsetWidth,e.height=t.offsetHeight;for(var o=r(t),s=e.isBorderBox=!(!a||!o[a]||"border-box"!==o[a]),c=0,d=l.length;c<d;c++){var p=l[c],h=o[p],u=parseFloat(h);e[p]=isNaN(u)?0:u}var f=e.paddingLeft+e.paddingRight,g=e.paddingTop+e.paddingBottom,m=e.marginLeft+e.marginRight,v=e.marginTop+e.marginBottom,y=e.borderLeftWidth+e.borderRightWidth,x=e.borderTopWidth+e.borderBottomWidth,_=s&&n,b=i(o.width);!1!==b&&(e.width=b+(_?0:f+y));var E=i(o.height);return!1!==E&&(e.height=E+(_?0:g+x)),e.innerWidth=e.width-(f+y),e.innerHeight=e.height-(g+x),e.outerWidth=e.width+m,e.outerHeight=e.height+v,e}}function i(t){var e=parseFloat(t);return-1===t.indexOf("%")&&!isNaN(e)&&e}var n,o=t.getStyleProperty,s=document.defaultView,r=s&&s.getComputedStyle?function(t){return s.getComputedStyle(t,null)}:function(t){return t.currentStyle},a=o("boxSizing");!function(){if(a){var t=document.createElement("div");t.style.width="200px",t.style.padding="1px 2px 3px 4px",t.style.borderStyle="solid",t.style.borderWidth="1px 2px 3px 4px",t.style[a]="border-box";var e=document.querySelector("body")||document.createElement("body");e.appendChild(t);var o=r(t);n=200===i(o.width),e.removeChild(t)}}();var l=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];t.getSize=e}(window),function(t){"use strict";function e(t,e){for(var i in e)t[i]=e[i];return t}function i(t,i){this.element=t,this.options=e({},this.options),e(this.options,i),this._create()}function n(t,e){t.x=e.pageX!==undefined?e.pageX:e.clientX,t.y=e.pageY!==undefined?e.pageY:e.clientY}for(var o,s=t.classie,r=t.EventEmitter,a=t.eventie,l=t.getStyleProperty,c=t.getSize,d=t.document,p=d.defaultView,h=p&&p.getComputedStyle?function(t){return p.getComputedStyle(t,null)}:function(t){return t.currentStyle},u="object"==typeof HTMLElement?function(t){return t instanceof HTMLElement}:function(t){return t&&"object"==typeof t&&1===t.nodeType&&"string"==typeof t.nodeName},f=0,g="webkit moz ms o".split(" "),m=t.requestAnimationFrame,v=t.cancelAnimationFrame,y=0;y<g.length&&(!m||!v);y++)o=g[y],m=m||t[o+"RequestAnimationFrame"],v=v||t[o+"CancelAnimationFrame"]||t[o+"CancelRequestAnimationFrame"];m&&v||(m=function(e){var i=(new Date).getTime(),n=Math.max(0,16-(i-f)),o=t.setTimeout(function(){e(i+n)},n);return f=i+n,o},v=function(e){t.clearTimeout(e)});var x=l("transform"),_=!!l("perspective");e(i.prototype,r.prototype),i.prototype.options={},i.prototype._create=function(){this.position={},this._getPosition(),this.startPoint={x:0,y:0},this.dragPoint={x:0,y:0},this.startPosition=e({},this.position);var t=h(this.element);"relative"!==t.position&&"absolute"!==t.position&&(this.element.style.position="relative"),this.enable(),this.setHandles()},i.prototype.setHandles=function(){this.handles=this.options.handle?this.element.querySelectorAll(this.options.handle):[this.element];for(var t=0,e=this.handles.length;t<e;t++){var i=this.handles[t];a.bind(i,"mousedown",this),a.bind(i,"touchstart",this)}},i.prototype._getPosition=function(){var t=h(this.element),e=parseInt(t.left,10),i=parseInt(t.top,10);this.position.x=isNaN(e)?0:e,this.position.y=isNaN(i)?0:i,this._addTransformPosition(t)},i.prototype._addTransformPosition=function(t){if(x){var e=t[x];if(0===e.indexOf("matrix")){var i=e.split(","),n=0===e.indexOf("matrix3d")?12:4,o=parseInt(i[n],10),s=parseInt(i[n+1],10);this.position.x+=o,this.position.y+=s}}},i.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},i.prototype.getTouch=function(t){for(var e=0,i=t.length;e<i;e++){var n=t[e];if(n.identifier===this.pointerIdentifier)return n}},i.prototype.onmousedown=function(t){this.dragStart(t,t)},i.prototype.ontouchstart=function(t){this.isDragging||this.dragStart(t,t.changedTouches[0])},i.prototype.dragStart=function(e,i){if(this.isEnabled){e.preventDefault?e.preventDefault():e.returnValue=!1;var o="touchstart"===e.type;this.pointerIdentifier=i.identifier,this._getPosition(),this.measureContainment(),n(this.startPoint,i),this.startPosition.x=this.position.x,this.startPosition.y=this.position.y,this.setLeftTop(),this.dragPoint.x=0,this.dragPoint.y=0,this.pointerMoveEvent=o?"touchmove":"mousemove",this.pointerEndEvent=o?"touchend":"mouseup",this.boundNode=e.preventDefault?t:d,a.bind(this.boundNode,this.pointerMoveEvent,this),a.bind(this.boundNode,this.pointerEndEvent,this),s.add(this.element,"is-dragging"),this.isDragging=!0,this.emitEvent("dragStart",[this,e,i]),this.animate()}},i.prototype.measureContainment=function(){var t=this.options.containment;if(t){this.size=c(this.element);var e=this.element.getBoundingClientRect(),i=u(t)?t:"string"==typeof t?d.querySelector(t):this.element.parentNode;this.containerSize=c(i);var n=i.getBoundingClientRect();this.relativeStartPosition={x:e.left-n.left,y:e.top-n.top}}},i.prototype.onmousemove=function(t){this.dragMove(t,t)},i.prototype.ontouchmove=function(t){var e=this.getTouch(t.changedTouches);e&&this.dragMove(t,e)},i.prototype.dragMove=function(t,e){if(n(this.dragPoint,e),this.dragPoint.x-=this.startPoint.x,this.dragPoint.y-=this.startPoint.y,this.options.containment){var i=this.relativeStartPosition.x,o=this.relativeStartPosition.y;this.dragPoint.x=Math.max(this.dragPoint.x,-i),this.dragPoint.y=Math.max(this.dragPoint.y,-o),this.dragPoint.x=Math.min(this.dragPoint.x,this.containerSize.width-i-this.size.width),this.dragPoint.y=Math.min(this.dragPoint.y,this.containerSize.height-o-this.size.height)}this.position.x=this.startPosition.x+this.dragPoint.x,this.position.y=this.startPosition.y+this.dragPoint.y,this.emitEvent("dragMove",[this,t,e])},i.prototype.onmouseup=function(t){this.dragEnd(t,t)},i.prototype.ontouchend=function(t){var e=this.getTouch(t.changedTouches);e&&this.dragEnd(t,e)},i.prototype.dragEnd=function(t,e){this.isDragging=!1,delete this.pointerIdentifier,x&&(this.element.style[x]="",this.setLeftTop()),a.unbind(this.boundNode,this.pointerMoveEvent,this),a.unbind(this.boundNode,this.pointerEndEvent,this),delete this.pointerMoveEvent,delete this.pointerEndEvent,s.remove(this.element,"is-dragging"),this.emitEvent("dragEnd",[this,t,e])},i.prototype.animate=function(){if(this.isDragging){this.positionDrag();var t=this;m(function(){t.animate()})}};var b=_?function(t,e){return"translate3d( "+t+"px, "+e+"px, 0)"}:function(t,e){return"translate( "+t+"px, "+e+"px)"};i.prototype.setLeftTop=function(){this.element.style.left=this.position.x+"px",this.element.style.top=this.position.y+"px"},i.prototype.positionDrag=x?function(){this.element.style[x]=b(this.dragPoint.x,this.dragPoint.y)}:i.prototype.setLeftTop,i.prototype.enable=function(){this.isEnabled=!0},i.prototype.disable=function(){this.isEnabled=!1,this.isDragging&&this.dragEnd()},t.Draggabilly=i}(window),function(t){function e(){}function i(t){function i(e){e.prototype.option||(e.prototype.option=function(e){t.isPlainObject(e)&&(this.options=t.extend(!0,this.options,e))})}function o(e,i){t.fn[e]=function(o){if("string"==typeof o){for(var r=n.call(arguments,1),a=0,l=this.length;a<l;a++){var c=this[a],d=t.data(c,e);if(d)if(t.isFunction(d[o])&&"_"!==o.charAt(0)){var p=d[o].apply(d,r);if(p!==undefined)return p}else s("no such method '"+o+"' for "+e+" instance");else s("cannot call methods on "+e+" prior to initialization; attempted to call '"+o+"'")}return this}return this.each(function(){var n=t.data(this,e);n?(n.option(o),n._init()):(n=new i(this,o),t.data(this,e,n))})}}if(t){var s="undefined"==typeof console?e:function(t){console.error(t)};return t.bridget=function(t,e){i(e),o(t,e)},t.bridget}}var n=Array.prototype.slice;"function"==typeof define&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],i):i(t.jQuery)}(window),function(t){function e(t){return new RegExp("(^|\\s+)"+t+"(\\s+|$)")}function i(t,e){(n(t,e)?s:o)(t,e)}var n,o,s;"classList"in document.documentElement?(n=function(t,e){return t.classList.contains(e)},o=function(t,e){t.classList.add(e)},s=function(t,e){t.classList.remove(e)}):(n=function(t,i){return e(i).test(t.className)},o=function(t,e){n(t,e)||(t.className=t.className+" "+e)},s=function(t,i){t.className=t.className.replace(e(i)," ")});var r={hasClass:n,addClass:o,removeClass:s,toggleClass:i,has:n,add:o,remove:s,toggle:i};"function"==typeof define&&define.amd?define("classie/classie",r):"object"==typeof exports?module.exports=r:t.classie=r}(window),function(t){function e(t){if(t){if("string"==typeof n[t])return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var e,o=0,s=i.length;o<s;o++)if(e=i[o]+t,"string"==typeof n[e])return e}}var i="Webkit Moz ms Ms O".split(" "),n=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return e}):"object"==typeof exports?module.exports=e:t.getStyleProperty=e}(window),function(t){function e(t){var e=parseFloat(t);return-1===t.indexOf("%")&&!isNaN(e)&&e}function i(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0,i=r.length;e<i;e++){t[r[e]]=0}return t}function n(t){function n(t){if("string"==typeof t&&(t=document.querySelector(t)),t&&"object"==typeof t&&t.nodeType){var n=s(t);if("none"===n.display)return i();var o={};o.width=t.offsetWidth,o.height=t.offsetHeight;for(var d=o.isBorderBox=!(!c||!n[c]||"border-box"!==n[c]),p=0,h=r.length;p<h;p++){var u=r[p],f=n[u];f=a(t,f);var g=parseFloat(f);o[u]=isNaN(g)?0:g}var m=o.paddingLeft+o.paddingRight,v=o.paddingTop+o.paddingBottom,y=o.marginLeft+o.marginRight,x=o.marginTop+o.marginBottom,_=o.borderLeftWidth+o.borderRightWidth,b=o.borderTopWidth+o.borderBottomWidth,E=d&&l,T=e(n.width);!1!==T&&(o.width=T+(E?0:m+_));var O=e(n.height);return!1!==O&&(o.height=O+(E?0:v+b)),o.innerWidth=o.width-(m+_),o.innerHeight=o.height-(v+b),o.outerWidth=o.width+y,o.outerHeight=o.height+x,o}}function a(t,e){if(o||-1===e.indexOf("%"))return e;var i=t.style,n=i.left,s=t.runtimeStyle,r=s&&s.left;return r&&(s.left=t.currentStyle.left),i.left=e,e=i.pixelLeft,i.left=n,r&&(s.left=r),e}var l,c=t("boxSizing");return function(){if(c){var t=document.createElement("div");t.style.width="200px",t.style.padding="1px 2px 3px 4px",t.style.borderStyle="solid",t.style.borderWidth="1px 2px 3px 4px",t.style[c]="border-box";var i=document.body||document.documentElement;i.appendChild(t);var n=s(t);l=200===e(n.width),i.removeChild(t)}}(),n}var o=t.getComputedStyle,s=o?function(t){return o(t,null)}:function(t){return t.currentStyle},r=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],n):"object"==typeof exports?module.exports=n(require("get-style-property")):t.getSize=n(t.getStyleProperty)}(window),function(t){function e(e){var i=t.event;return i.target=i.target||i.srcElement||e,i}var i=document.documentElement,n=function(){};i.addEventListener?n=function(t,e,i){t.addEventListener(e,i,!1)}:i.attachEvent&&(n=function(t,i,n){t[i+n]=n.handleEvent?function(){var i=e(t);n.handleEvent.call(n,i)}:function(){var i=e(t);n.call(t,i)},t.attachEvent("on"+i,t[i+n])});var o=function(){};i.removeEventListener?o=function(t,e,i){t.removeEventListener(e,i,!1)}:i.detachEvent&&(o=function(t,e,i){t.detachEvent("on"+e,t[e+i]);try{delete t[e+i]}catch(n){t[e+i]=undefined}});var s={bind:n,unbind:o};"function"==typeof define&&define.amd?define("eventie/eventie",s):"object"==typeof exports?module.exports=s:t.eventie=s}(this),function(t){function e(t){"function"==typeof t&&(e.isReady?t():s.push(t))}function i(t){var i="readystatechange"===t.type&&"complete"!==o.readyState;if(!e.isReady&&!i){e.isReady=!0;for(var n=0,r=s.length;n<r;n++){(0,s[n])()}}}function n(n){return n.bind(o,"DOMContentLoaded",i),n.bind(o,"readystatechange",i),n.bind(t,"load",i),e}var o=t.document,s=[];e.isReady=!1,"function"==typeof define&&define.amd?(e.isReady="function"==typeof requirejs,define("doc-ready/doc-ready",["eventie/eventie"],n)):"object"==typeof exports?module.exports=n(require("eventie")):t.docReady=n(t.eventie)}(window),function(){function t(){}function e(t,e){for(var i=t.length;i--;)if(t[i].listener===e)return i;return-1}function i(t){return function(){return this[t].apply(this,arguments)}}var n=t.prototype,o=this,s=o.EventEmitter;n.getListeners=function(t){var e,i,n=this._getEvents();if(t instanceof RegExp){e={};for(i in n)n.hasOwnProperty(i)&&t.test(i)&&(e[i]=n[i])}else e=n[t]||(n[t]=[]);return e},n.flattenListeners=function(t){var e,i=[];for(e=0;e<t.length;e+=1)i.push(t[e].listener);return i},n.getListenersAsObject=function(t){var e,i=this.getListeners(t);return i instanceof Array&&(e={},e[t]=i),e||i},n.addListener=function(t,i){var n,o=this.getListenersAsObject(t),s="object"==typeof i;for(n in o)o.hasOwnProperty(n)&&-1===e(o[n],i)&&o[n].push(s?i:{listener:i,once:!1});return this},n.on=i("addListener"),n.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},n.once=i("addOnceListener"),n.defineEvent=function(t){return this.getListeners(t),this},n.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},n.removeListener=function(t,i){var n,o,s=this.getListenersAsObject(t);for(o in s)s.hasOwnProperty(o)&&-1!==(n=e(s[o],i))&&s[o].splice(n,1);return this},n.off=i("removeListener"),n.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},n.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},n.manipulateListeners=function(t,e,i){var n,o,s=t?this.removeListener:this.addListener,r=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(n=i.length;n--;)s.call(this,e,i[n]);else for(n in e)e.hasOwnProperty(n)&&(o=e[n])&&("function"==typeof o?s.call(this,n,o):r.call(this,n,o));return this},n.removeEvent=function(t){var e,i=typeof t,n=this._getEvents();if("string"===i)delete n[t];else if(t instanceof RegExp)for(e in n)n.hasOwnProperty(e)&&t.test(e)&&delete n[e];else delete this._events;return this},n.removeAllListeners=i("removeEvent"),n.emitEvent=function(t,e){var i,n,o,s=this.getListenersAsObject(t);for(o in s)if(s.hasOwnProperty(o))for(n=s[o].length;n--;)i=s[o][n],!0===i.once&&this.removeListener(t,i.listener),i.listener.apply(this,e||[])===this._getOnceReturnValue()&&this.removeListener(t,i.listener);return this},n.trigger=i("emitEvent"),n.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},n.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},n._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},n._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return o.EventEmitter=s,t},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return t}):"object"==typeof module&&module.exports?module.exports=t:this.EventEmitter=t}.call(this),function(t){function e(t,e){return t[r](e)}function i(t){if(!t.parentNode){document.createDocumentFragment().appendChild(t)}}function n(t,e){i(t);for(var n=t.parentNode.querySelectorAll(e),o=0,s=n.length;o<s;o++)if(n[o]===t)return!0;return!1}function o(t,n){return i(t),e(t,n)}var s,r=function(){if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0,n=e.length;i<n;i++){var o=e[i],s=o+"MatchesSelector";if(t[s])return s}}();if(r){var a=document.createElement("div"),l=e(a,"div");s=l?e:o}else s=n;"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return s}):"object"==typeof exports?module.exports=s:window.matchesSelector=s}(Element.prototype),function(t){function e(t,e){for(var i in e)t[i]=e[i];return t}function i(t){for(var e in t)return!1;return null,!0}function n(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}function o(t,o,s){function a(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}var l=s("transition"),c=s("transform"),d=l&&c,p=!!s("perspective"),h={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[l],u=["transform","transition","transitionDuration","transitionProperty"],f=function(){for(var t={},e=0,i=u.length;e<i;e++){var n=u[e],o=s(n);o&&o!==n&&(t[n]=o)}return t}();e(a.prototype,t.prototype),a.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},a.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},a.prototype.getSize=function(){this.size=o(this.element)},a.prototype.css=function(t){var e=this.element.style;for(var i in t){e[f[i]||i]=t[i]}},a.prototype.getPosition=function(){var t=r(this.element),e=this.layout.options,i=e.isOriginLeft,n=e.isOriginTop,o=parseInt(t[i?"left":"right"],10),s=parseInt(t[n?"top":"bottom"],10);o=isNaN(o)?0:o,s=isNaN(s)?0:s;var a=this.layout.size;o-=i?a.paddingLeft:a.paddingRight,s-=n?a.paddingTop:a.paddingBottom,this.position.x=o,this.position.y=s},a.prototype.layoutPosition=function(){var t=this.layout.size,e=this.layout.options,i={};e.isOriginLeft?(i.left=this.position.x+t.paddingLeft+"px",i.right=""):(i.right=this.position.x+t.paddingRight+"px",i.left=""),e.isOriginTop?(i.top=this.position.y+t.paddingTop+"px",i.bottom=""):(i.bottom=this.position.y+t.paddingBottom+"px",i.top=""),this.css(i),this.emitEvent("layout",[this])};var g=p?function(t,e){return"translate3d("+t+"px, "+e+"px, 0)"}:function(t,e){return"translate("+t+"px, "+e+"px)"};a.prototype._transitionTo=function(t,e){this.getPosition();var i=this.position.x,n=this.position.y,o=parseInt(t,10),s=parseInt(e,10),r=o===this.position.x&&s===this.position.y;if(this.setPosition(t,e),r&&!this.isTransitioning)return void this.layoutPosition();var a=t-i,l=e-n,c={},d=this.layout.options;a=d.isOriginLeft?a:-a,l=d.isOriginTop?l:-l,c.transform=g(a,l),this.transition({to:c,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},a.prototype.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},a.prototype.moveTo=d?a.prototype._transitionTo:a.prototype.goTo,a.prototype.setPosition=function(t,e){this.position.x=parseInt(t,10),this.position.y=parseInt(e,10)},a.prototype._nonTransition=function(t){this.css(t.to),t.isCleaning&&this._removeStyles(t.to);for(var e in t.onTransitionEnd)t.onTransitionEnd[e].call(this)},a.prototype._transition=function(t){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(t);var e=this._transn;for(var i in t.onTransitionEnd)e.onEnd[i]=t.onTransitionEnd[i];for(i in t.to)e.ingProperties[i]=!0,t.isCleaning&&(e.clean[i]=!0);if(t.from){this.css(t.from);this.element.offsetHeight;null}this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0};var m=c&&n(c)+",opacity";a.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:m,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(h,this,!1))},a.prototype.transition=a.prototype[l?"_transition":"_nonTransition"],a.prototype.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},a.prototype.onotransitionend=function(t){this.ontransitionend(t)};var v={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};a.prototype.ontransitionend=function(t){if(t.target===this.element){var e=this._transn,n=v[t.propertyName]||t.propertyName;if(delete e.ingProperties[n],i(e.ingProperties)&&this.disableTransition(),n in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[n]),n in e.onEnd){e.onEnd[n].call(this),delete e.onEnd[n]}this.emitEvent("transitionEnd",[this])}},a.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(h,this,!1),this.isTransitioning=!1},a.prototype._removeStyles=function(t){var e={};for(var i in t)e[i]="";this.css(e)};var y={transitionProperty:"",transitionDuration:""};return a.prototype.removeTransitionStyles=function(){this.css(y)},a.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.emitEvent("remove",[this])},a.prototype.remove=function(){if(!l||!parseFloat(this.layout.options.transitionDuration))return void this.removeElem();var t=this;this.on("transitionEnd",function(){return t.removeElem(),!0}),this.hide()},a.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options;this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0})},a.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options;this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:{opacity:function(){this.isHidden&&this.css({display:"none"})}}})},a.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},a}var s=t.getComputedStyle,r=s?function(t){return s(t,null)}:function(t){return t.currentStyle};"function"==typeof define&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],o):(t.Outlayer={},t.Outlayer.Item=o(t.EventEmitter,t.getSize,t.getStyleProperty))}(window),function(t){function e(t,e){for(var i in e)t[i]=e[i];return t}function i(t){return"[object Array]"===p.call(t)}function n(t){var e=[];if(i(t))e=t;else if(t&&"number"==typeof t.length)for(var n=0,o=t.length;n<o;n++)e.push(t[n]);else e.push(t);return e}function o(t,e){var i=u(e,t);-1!==i&&e.splice(i,1)}function s(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()}function r(i,r,p,u,f,g){function m(t,i){if("string"==typeof t&&(t=a.querySelector(t)),!t||!h(t))return void(l&&l.error("Bad "+this.constructor.namespace+" element: "+t));this.element=t,this.options=e({},this.constructor.defaults),this.option(i);var n=++v;this.element.outlayerGUID=n,y[n]=this,this._create(),this.options.isInitLayout&&this.layout()}var v=0,y={};return m.namespace="outlayer",m.Item=g,m.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},e(m.prototype,p.prototype),m.prototype.option=function(t){e(this.options,t)},m.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),e(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},m.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},m.prototype._itemize=function(t){for(var e=this._filterFindItemElements(t),i=this.constructor.Item,n=[],o=0,s=e.length;o<s;o++){var r=e[o],a=new i(r,this);n.push(a)}return n},
m.prototype._filterFindItemElements=function(t){t=n(t);for(var e=this.options.itemSelector,i=[],o=0,s=t.length;o<s;o++){var r=t[o];if(h(r))if(e){f(r,e)&&i.push(r);for(var a=r.querySelectorAll(e),l=0,c=a.length;l<c;l++)i.push(a[l])}else i.push(r)}return i},m.prototype.getItemElements=function(){for(var t=[],e=0,i=this.items.length;e<i;e++)t.push(this.items[e].element);return t},m.prototype.layout=function(){this._resetLayout(),this._manageStamps();var t=this.options.isLayoutInstant!==undefined?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,t),this._isLayoutInited=!0},m.prototype._init=m.prototype.layout,m.prototype._resetLayout=function(){this.getSize()},m.prototype.getSize=function(){this.size=u(this.element)},m.prototype._getMeasurement=function(t,e){var i,n=this.options[t];n?("string"==typeof n?i=this.element.querySelector(n):h(n)&&(i=n),this[t]=i?u(i)[e]:n):this[t]=0},m.prototype.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},m.prototype._getItemsForLayout=function(t){for(var e=[],i=0,n=t.length;i<n;i++){var o=t[i];o.isIgnored||e.push(o)}return e},m.prototype._layoutItems=function(t,e){function i(){n.emitEvent("layoutComplete",[n,t])}var n=this;if(!t||!t.length)return void i();this._itemsOn(t,"layout",i);for(var o=[],s=0,r=t.length;s<r;s++){var a=t[s],l=this._getItemLayoutPosition(a);l.item=a,l.isInstant=e||a.isLayoutInstant,o.push(l)}this._processLayoutQueue(o)},m.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},m.prototype._processLayoutQueue=function(t){for(var e=0,i=t.length;e<i;e++){var n=t[e];this._positionItem(n.item,n.x,n.y,n.isInstant)}},m.prototype._positionItem=function(t,e,i,n){n?t.goTo(e,i):t.moveTo(e,i)},m.prototype._postLayout=function(){this.resizeContainer()},m.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var t=this._getContainerSize();t&&(this._setContainerMeasure(t.width,!0),this._setContainerMeasure(t.height,!1))}},m.prototype._getContainerSize=d,m.prototype._setContainerMeasure=function(t,e){if(t!==undefined){var i=this.size;i.isBorderBox&&(t+=e?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px"}},m.prototype._itemsOn=function(t,e,i){function n(){return o++,o===s&&i.call(r),!0}for(var o=0,s=t.length,r=this,a=0,l=t.length;a<l;a++){t[a].on(e,n)}},m.prototype.ignore=function(t){var e=this.getItem(t);e&&(e.isIgnored=!0)},m.prototype.unignore=function(t){var e=this.getItem(t);e&&delete e.isIgnored},m.prototype.stamp=function(t){if(t=this._find(t)){this.stamps=this.stamps.concat(t);for(var e=0,i=t.length;e<i;e++){var n=t[e];this.ignore(n)}}},m.prototype.unstamp=function(t){if(t=this._find(t))for(var e=0,i=t.length;e<i;e++){var n=t[e];o(n,this.stamps),this.unignore(n)}},m.prototype._find=function(t){if(t)return"string"==typeof t&&(t=this.element.querySelectorAll(t)),t=n(t)},m.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var t=0,e=this.stamps.length;t<e;t++){var i=this.stamps[t];this._manageStamp(i)}}},m.prototype._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},m.prototype._manageStamp=d,m.prototype._getElementOffset=function(t){var e=t.getBoundingClientRect(),i=this._boundingRect,n=u(t);return{left:e.left-i.left-n.marginLeft,top:e.top-i.top-n.marginTop,right:i.right-e.right-n.marginRight,bottom:i.bottom-e.bottom-n.marginBottom}},m.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},m.prototype.bindResize=function(){this.isResizeBound||(i.bind(t,"resize",this),this.isResizeBound=!0)},m.prototype.unbindResize=function(){this.isResizeBound&&i.unbind(t,"resize",this),this.isResizeBound=!1},m.prototype.onresize=function(){function t(){e.resize(),delete e.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var e=this;this.resizeTimeout=setTimeout(t,100)},m.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},m.prototype.needsResizeLayout=function(){var t=u(this.element);return this.size&&t&&t.innerWidth!==this.size.innerWidth},m.prototype.addItems=function(t){var e=this._itemize(t);return e.length&&(this.items=this.items.concat(e)),e},m.prototype.appended=function(t){var e=this.addItems(t);e.length&&(this.layoutItems(e,!0),this.reveal(e))},m.prototype.prepended=function(t){var e=this._itemize(t);if(e.length){var i=this.items.slice(0);this.items=e.concat(i),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(i)}},m.prototype.reveal=function(t){var e=t&&t.length;if(e)for(var i=0;i<e;i++){var n=t[i];n.reveal()}},m.prototype.hide=function(t){var e=t&&t.length;if(e)for(var i=0;i<e;i++){var n=t[i];n.hide()}},m.prototype.getItem=function(t){for(var e=0,i=this.items.length;e<i;e++){var n=this.items[e];if(n.element===t)return n}},m.prototype.getItems=function(t){if(t&&t.length){for(var e=[],i=0,n=t.length;i<n;i++){var o=t[i],s=this.getItem(o);s&&e.push(s)}return e}},m.prototype.remove=function(t){t=n(t);var e=this.getItems(t);if(e&&e.length){this._itemsOn(e,"remove",function(){this.emitEvent("removeComplete",[this,e])});for(var i=0,s=e.length;i<s;i++){var r=e[i];r.remove(),o(r,this.items)}}},m.prototype.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="";for(var e=0,i=this.items.length;e<i;e++){this.items[e].destroy()}this.unbindResize(),delete this.element.outlayerGUID,c&&c.removeData(this.element,this.constructor.namespace)},m.data=function(t){var e=t&&t.outlayerGUID;return e&&y[e]},m.create=function(t,i){function n(){m.apply(this,arguments)}return Object.create?n.prototype=Object.create(m.prototype):e(n.prototype,m.prototype),n.prototype.constructor=n,n.defaults=e({},m.defaults),e(n.defaults,i),n.prototype.settings={},n.namespace=t,n.data=m.data,n.Item=function(){g.apply(this,arguments)},n.Item.prototype=new g,r(function(){for(var e=s(t),i=a.querySelectorAll(".js-"+e),o="data-"+e+"-options",r=0,d=i.length;r<d;r++){var p,h=i[r],u=h.getAttribute(o);try{p=u&&JSON.parse(u)}catch(t){l&&l.error("Error parsing "+o+" on "+h.nodeName.toLowerCase()+(h.id?"#"+h.id:"")+": "+t);continue}var f=new n(h,p);c&&c.data(h,t,f)}}),c&&c.bridget&&c.bridget(t,n),n},m.Item=g,m}var a=t.document,l=t.console,c=t.jQuery,d=function(){},p=Object.prototype.toString,h="object"==typeof HTMLElement?function(t){return t instanceof HTMLElement}:function(t){return t&&"object"==typeof t&&1===t.nodeType&&"string"==typeof t.nodeName},u=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1};"function"==typeof define&&define.amd?define("outlayer/outlayer",["eventie/eventie","doc-ready/doc-ready","eventEmitter/EventEmitter","get-size/get-size","matches-selector/matches-selector","./item"],r):t.Outlayer=r(t.eventie,t.docReady,t.EventEmitter,t.getSize,t.matchesSelector,t.Outlayer.Item)}(window),function(t){function e(){function t(e){for(var i in t.defaults)this[i]=t.defaults[i];for(i in e)this[i]=e[i]}return i.Rect=t,t.defaults={x:0,y:0,width:0,height:0},t.prototype.contains=function(t){var e=t.width||0,i=t.height||0;return this.x<=t.x&&this.y<=t.y&&this.x+this.width>=t.x+e&&this.y+this.height>=t.y+i},t.prototype.overlaps=function(t){var e=this.x+this.width,i=this.y+this.height,n=t.x+t.width,o=t.y+t.height;return this.x<n&&e>t.x&&this.y<o&&i>t.y},t.prototype.getMaximalFreeRects=function(e){if(!this.overlaps(e))return!1;var i,n=[],o=this.x+this.width,s=this.y+this.height,r=e.x+e.width,a=e.y+e.height;return this.y<e.y&&(i=new t({x:this.x,y:this.y,width:this.width,height:e.y-this.y}),n.push(i)),o>r&&(i=new t({x:r,y:this.y,width:o-r,height:this.height}),n.push(i)),s>a&&(i=new t({x:this.x,y:a,width:this.width,height:s-a}),n.push(i)),this.x<e.x&&(i=new t({x:this.x,y:this.y,width:e.x-this.x,height:this.height}),n.push(i)),n},t.prototype.canFit=function(t){return this.width>=t.width&&this.height>=t.height},t}var i=t.Packery=function(){};"function"==typeof define&&define.amd?define("packery/js/rect",e):(t.Packery=t.Packery||{},t.Packery.Rect=e())}(window),function(t){function e(t){function e(t,e,i){this.width=t||0,this.height=e||0,this.sortDirection=i||"downwardLeftToRight",this.reset()}e.prototype.reset=function(){this.spaces=[],this.newSpaces=[];var e=new t({x:0,y:0,width:this.width,height:this.height});this.spaces.push(e),this.sorter=i[this.sortDirection]||i.downwardLeftToRight},e.prototype.pack=function(t){for(var e=0,i=this.spaces.length;e<i;e++){var n=this.spaces[e];if(n.canFit(t)){this.placeInSpace(t,n);break}}},e.prototype.placeInSpace=function(t,e){t.x=e.x,t.y=e.y,this.placed(t)},e.prototype.placed=function(t){for(var i=[],n=0,o=this.spaces.length;n<o;n++){var s=this.spaces[n],r=s.getMaximalFreeRects(t);r?i.push.apply(i,r):i.push(s)}this.spaces=i,e.mergeRects(this.spaces),this.spaces.sort(this.sorter)},e.mergeRects=function(t){for(var e=0,i=t.length;e<i;e++){var n=t[e];if(n){var o=t.slice(0);o.splice(e,1);for(var s=0,r=0,a=o.length;r<a;r++){var l=o[r],c=e>r?0:1;n.contains(l)&&(t.splice(r+c-s,1),s++)}}}return t};var i={downwardLeftToRight:function(t,e){return t.y-e.y||t.x-e.x},rightwardTopToBottom:function(t,e){return t.x-e.x||t.y-e.y}};return e}if("function"==typeof define&&define.amd)define("packery/js/packer",["./rect"],e);else{var i=t.Packery=t.Packery||{};i.Packer=e(i.Rect)}}(window),function(t){function e(t,e,i){var n=t("transform"),o=function(){e.Item.apply(this,arguments)};o.prototype=new e.Item;var s=o.prototype._create;return o.prototype._create=function(){s.call(this),this.rect=new i,this.placeRect=new i},o.prototype.dragStart=function(){this.getPosition(),this.removeTransitionStyles(),this.isTransitioning&&n&&(this.element.style[n]="none"),this.getSize(),this.isPlacing=!0,this.needsPositioning=!1,this.positionPlaceRect(this.position.x,this.position.y),this.isTransitioning=!1,this.didDrag=!1},o.prototype.dragMove=function(t,e){this.didDrag=!0;var i=this.layout.size;t-=i.paddingLeft,e-=i.paddingTop,this.positionPlaceRect(t,e)},o.prototype.dragStop=function(){this.getPosition();var t=this.position.x!==this.placeRect.x,e=this.position.y!==this.placeRect.y;this.needsPositioning=t||e,this.didDrag=!1},o.prototype.positionPlaceRect=function(t,e,i){this.placeRect.x=this.getPlaceRectCoord(t,!0),this.placeRect.y=this.getPlaceRectCoord(e,!1,i)},o.prototype.getPlaceRectCoord=function(t,e,i){var n=e?"Width":"Height",o=this.size["outer"+n],s=this.layout[e?"columnWidth":"rowHeight"],r=this.layout.size["inner"+n];e||(r=Math.max(r,this.layout.maxY),this.layout.rowHeight||(r-=this.layout.gutter));var a;if(s){s+=this.layout.gutter,r+=e?this.layout.gutter:0,t=Math.round(t/s);var l;l=this.layout.options.isHorizontal?e?"ceil":"floor":e?"floor":"ceil";var c=Math[l](r/s);c-=Math.ceil(o/s),a=c}else a=r-o;return t=i?t:Math.min(t,a),t*=s||1,Math.max(0,t)},o.prototype.copyPlaceRectPosition=function(){this.rect.x=this.placeRect.x,this.rect.y=this.placeRect.y},o}"function"==typeof define&&define.amd?define("packery/js/item",["get-style-property/get-style-property","outlayer/outlayer","./rect"],e):t.Packery.Item=e(t.getStyleProperty,t.Outlayer,t.Packery.Rect)}(window),function(t){function e(t,e,i,n,o,s){function r(t,e){return t.position.y-e.position.y||t.position.x-e.position.x}function a(t,e){return t.position.x-e.position.x||t.position.y-e.position.y}var l=i.create("packery");return l.Item=s,l.prototype._create=function(){i.prototype._create.call(this),this.packer=new o,this.stamp(this.options.stamped);var t=this;this.handleDraggabilly={dragStart:function(e){t.itemDragStart(e.element)},dragMove:function(e){t.itemDragMove(e.element,e.position.x,e.position.y)},dragEnd:function(e){t.itemDragEnd(e.element)}},this.handleUIDraggable={start:function(e){t.itemDragStart(e.currentTarget)},drag:function(e,i){t.itemDragMove(e.currentTarget,i.position.left,i.position.top)},stop:function(e){t.itemDragEnd(e.currentTarget)}}},l.prototype._resetLayout=function(){this.getSize(),this._getMeasurements();var t=this.packer;this.options.isHorizontal?(t.width=Number.POSITIVE_INFINITY,t.height=this.size.innerHeight+this.gutter,t.sortDirection="rightwardTopToBottom"):(t.width=this.size.innerWidth+this.gutter,t.height=Number.POSITIVE_INFINITY,t.sortDirection="downwardLeftToRight"),t.reset(),this.maxY=0,this.maxX=0},l.prototype._getMeasurements=function(){this._getMeasurement("columnWidth","width"),this._getMeasurement("rowHeight","height"),this._getMeasurement("gutter","width")},l.prototype._getItemLayoutPosition=function(t){return this._packItem(t),t.rect},l.prototype._packItem=function(t){this._setRectSize(t.element,t.rect),this.packer.pack(t.rect),this._setMaxXY(t.rect)},l.prototype._setMaxXY=function(t){this.maxX=Math.max(t.x+t.width,this.maxX),this.maxY=Math.max(t.y+t.height,this.maxY)},l.prototype._setRectSize=function(t,i){var n=e(t),o=n.outerWidth,s=n.outerHeight;if(o||s){var r=this.columnWidth+this.gutter,a=this.rowHeight+this.gutter;o=this.columnWidth?Math.ceil(o/r)*r:o+this.gutter,s=this.rowHeight?Math.ceil(s/a)*a:s+this.gutter}i.width=Math.min(o,this.packer.width),i.height=Math.min(s,this.packer.height)},l.prototype._getContainerSize=function(){return this.options.isHorizontal?{width:this.maxX-this.gutter}:{height:this.maxY-this.gutter}},l.prototype._manageStamp=function(t){var e,i=this.getItem(t);if(i&&i.isPlacing)e=i.placeRect;else{var o=this._getElementOffset(t);e=new n({x:this.options.isOriginLeft?o.left:o.right,y:this.options.isOriginTop?o.top:o.bottom})}this._setRectSize(t,e),this.packer.placed(e),this._setMaxXY(e)},l.prototype.sortItemsByPosition=function(){var t=this.options.isHorizontal?a:r;this.items.sort(t)},l.prototype.fit=function(t,e,i){var n=this.getItem(t);n&&(this._getMeasurements(),this.stamp(n.element),n.getSize(),n.isPlacing=!0,e=e===undefined?n.rect.x:e,i=i===undefined?n.rect.y:i,n.positionPlaceRect(e,i,!0),this._bindFitEvents(n),n.moveTo(n.placeRect.x,n.placeRect.y),this.layout(),this.unstamp(n.element),this.sortItemsByPosition(),n.isPlacing=!1,n.copyPlaceRectPosition())},l.prototype._bindFitEvents=function(t){function e(){2===++n&&i.emitEvent("fitComplete",[i,t])}var i=this,n=0;t.on("layout",function(){return e(),!0}),this.on("layoutComplete",function(){return e(),!0})},l.prototype.resize=function(){var t=e(this.element),i=this.size&&t,n=this.options.isHorizontal?"innerHeight":"innerWidth";i&&t[n]===this.size[n]||this.layout()},l.prototype.itemDragStart=function(t){this.stamp(t);var e=this.getItem(t);e&&e.dragStart()},l.prototype.itemDragMove=function(t,e,i){function n(){s.layout(),delete s.dragTimeout}var o=this.getItem(t);o&&o.dragMove(e,i);var s=this;this.clearDragTimeout(),this.dragTimeout=setTimeout(n,40)},l.prototype.clearDragTimeout=function(){this.dragTimeout&&clearTimeout(this.dragTimeout)},l.prototype.itemDragEnd=function(e){var i,n=this.getItem(e);if(n&&(i=n.didDrag,n.dragStop()),!n||!i&&!n.needsPositioning)return void this.unstamp(e);t.add(n.element,"is-positioning-post-drag");var o=this._getDragEndLayoutComplete(e,n);n.needsPositioning?(n.on("layout",o),n.moveTo(n.placeRect.x,n.placeRect.y)):n&&n.copyPlaceRectPosition(),this.clearDragTimeout(),this.on("layoutComplete",o),this.layout()},l.prototype._getDragEndLayoutComplete=function(e,i){var n=i&&i.needsPositioning,o=0,s=n?2:1,r=this;return function(){return++o!==s||(i&&(t.remove(i.element,"is-positioning-post-drag"),i.isPlacing=!1,i.copyPlaceRectPosition()),r.unstamp(e),r.sortItemsByPosition(),n&&r.emitEvent("dragItemPositioned",[r,i]),!0)}},l.prototype.bindDraggabillyEvents=function(t){t.on("dragStart",this.handleDraggabilly.dragStart),t.on("dragMove",this.handleDraggabilly.dragMove),t.on("dragEnd",this.handleDraggabilly.dragEnd)},l.prototype.bindUIDraggableEvents=function(t){t.on("dragstart",this.handleUIDraggable.start).on("drag",this.handleUIDraggable.drag).on("dragstop",this.handleUIDraggable.stop)},l.Rect=n,l.Packer=o,l}"function"==typeof define&&define.amd?define(["classie/classie","get-size/get-size","outlayer/outlayer","packery/js/rect","packery/js/packer","packery/js/item"],e):t.Packery=e(t.classie,t.getSize,t.Outlayer,t.Packery.Rect,t.Packery.Packer,t.Packery.Item)}(window),Draggabilly.prototype.coords=function(t){return{x:t.touches?t.touches[0].clientX:t.clientX,y:t.touches?t.touches[0].clientY:t.clientY}},Draggabilly.prototype.onTimerMove=function(t){var e=this.coords(t.data.event);(Math.abs(e.x-t.data.startPos.x)>10||Math.abs(e.y-t.data.startPos.y)>10)&&(this.onTimerEnd(t),$(document.body).removeClass("timer"))},Draggabilly.prototype.onTimerEnd=function(t){var e=$(document.body);clearTimeout(t.data.timer),e.off("touchmove.timer"),e.off("touchend.timer"),this.enable()},Draggabilly.prototype.ontouchstart=function(t){var e,i=$(document.body),n=this.coords(t);this.isEnabled&&!this.isDragging&&(this.disable(),i.addClass("timer"),e=setTimeout(function(){t.data=t.data||{},t.data.timer=e,this.onTimerEnd(t),this.isDragging||($(document).on("touchmove.dragging",function(t){t.preventDefault()}),this.dragStart(t,t.changedTouches[0]))}.bind(this),350),i.on("touchmove.timer",{event:t,startPos:n,timer:e},this.onTimerMove.bind(this)),i.on("touchend.timer",{timer:e},this.onTimerEnd.bind(this)))},Draggabilly.prototype.ontouchend=function(t){var e=this.getTouch(t.changedTouches);e&&this.dragEnd(t,e),$(document.body).removeClass("timer"),$(document).off("touchmove.dragging")},function(t){function e(e,i,n,o){t.each(r,function(t,s){s[e].call(this,i,n,o)})}function i(t){var i=a.Event(t);s=a.State(i),e("touchstart",t,s,i)}function n(t){var i=a.Event(t);s.move.push(i),e("touchmove",t,s,i)}function o(t){var i=a.Event(t);s.end=i,e("touchend",t,s,i)}var s,r={},a={active:!1,on:function(){t(document).on("touchstart",i).on("touchmove",n).on("touchend touchcancel",o),a.active=!0},off:function(){t(document).off("touchstart",i).off("touchmove",n).off("touchend touchcancel",o),a.active=!1},track:function(t,e){r[t]=e},addEventParam:function(e,i){var n=t(e.target),o=n.offset(),s={pageX:e.point[0].x,pageY:e.point[0].y,offsetX:o.left-e.point[0].x,offsetY:o.top-e.point[0].y};return t.extend(s,i)},Event:function(e){var i={type:e.type,timestamp:(new Date).getTime(),target:e.target,point:[]},n=e.changedTouches||e.originalEvent.changedTouches||e.touches||e.originalEvent.touches;return t.each(n,function(t,e){i.point.push({x:e.pageX,y:e.pageY})}),i},State:function(t){return t.point[0],{start:t,move:[],end:null}},calc:{getDuration:function(t,e){return e.timestamp-t.timestamp},getDistance:function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},getAngle:function(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI},getDirection:function(t){return-45>t&&t>-135?"up":t>=-45&&45>=t?"right":t>=45&&135>t?"down":t>=135||-135>=t?"left":"unknown"},getScale:function(t,e){var i=t.point,n=e.point;return 2===i.length&&2===n.length?(Math.sqrt(Math.pow(n[0].x-n[1].x,2)+Math.pow(n[0].y-n[1].y,2))/Math.sqrt(Math.pow(i[0].x-i[1].x,2)+Math.pow(i[0].y-i[1].y,2))).toFixed(2):0},getRotation:function(t,e){var i=t.point,n=e.point;return 2===i.length&&2===n.length?(180*Math.atan2(n[0].y-n[1].y,n[0].x-n[1].x)/Math.PI-180*Math.atan2(i[0].y-i[1].y,i[0].x-i[1].x)/Math.PI).toFixed(2):0}}};a.on(),t.toe=a}(jQuery),function(t,e){var i="swipe",n={distance:40,duration:1200,direction:"all"};e.track(i,{touchstart:function(t,e,n){e[i]={finger:n.point.length}},touchmove:function(t,e,n){e[i].finger=n.point.length>e[i].finger?n.point.length:e[i].finger},touchend:function(o,s,r){var a,l,c=t.extend(n,o.data);a=e.calc.getDuration(s.start,r),l=e.calc.getDistance(s.start.point[0],r.point[0]),c.duration>a&&l>c.distance&&(s[i].angle=e.calc.getAngle(s.start.point[0],r.point[0]),s[i].direction=e.calc.getDirection(s[i].angle),("all"===c.direction||s[i].direction===c.direction)&&t(o.target).trigger(t.Event(i,e.addEventParam(s.start,s[i]))))}})}(jQuery,jQuery.toe),function(t,e){var i="tap",n={distance:10,duration:300,finger:1};e.track(i,{touchstart:function(t,e,n){e[i]={finger:n.point.length}},touchmove:function(t,e,n){e[i].finger=n.point.length>e[i].finger?n.point.length:e[i].finger},touchend:function(o,s,r){var a,l,c=t.extend(n,o.data);a=e.calc.getDuration(s.start,r),l=e.calc.getDistance(s.start.point[0],r.point[0]),c.duration>a&&c.distance>l&&s[i].finger===c.finger&&t(o.target).trigger(t.Event(i,e.addEventParam(s.start,s[i])))}})}(jQuery,jQuery.toe),function(t,e){var i,n,o="taphold",s={distance:20,duration:500,finger:1};e.track(o,{touchstart:function(r,a,l){var c=t.extend(s,r.data);n=!1,a[o]={finger:l.point.length},clearTimeout(i),i=setTimeout(function(){!n&&e.active&&a[o].finger===c.finger&&t(r.target).trigger(t.Event(o,e.addEventParam(l,a[o])))},c.duration)},touchmove:function(i,r,a){var l=t.extend(s,i.data);r[o].finger=a.point.length>r[o].finger?a.point.length:r[o].finger,e.calc.getDistance(r.start.point[0],a.point[0])>l.distance&&(n=!0)},touchend:function(){n=!0,clearTimeout(i)}})}(jQuery,jQuery.toe),function(t,e){var i,n="transform",o={scale:.1,rotation:15};e.track(n,{touchstart:function(t,e,o){i=!1,e[n]={start:o,move:[]}},touchmove:function(s,r,a){var l=t.extend(o,s.data);2===a.point.length&&(r[n].move.push(a),2!==r[n].start.point.length&&2===a.point.length&&(r[n].start=t.extend({},a)),r[n].rotation=e.calc.getRotation(r[n].start,a),r[n].scale=e.calc.getScale(r[n].start,a),(Math.abs(1-r[n].scale)>l.scale||Math.abs(r[n].rotation)>l.rotation)&&(i||(t(s.target).trigger(t.Event("transformstart",r[n])),i=!0),t(s.target).trigger(t.Event("transform",r[n]))))},touchend:function(o,s,r){i&&(i=!1,2!==r.point.length&&(s.end=t.extend({},s[n].move[s[n].move.length-1])),s[n].rotation=e.calc.getRotation(s[n].start,s.end),s[n].scale=e.calc.getScale(s[n].start,s.end),t(o.target).trigger(t.Event("transformend",s[n])))}})}(jQuery,jQuery.toe),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.error_message=Handlebars.template({1:function(t,e,i,n,o){return"    "+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},null!=e?e.msg:e,null!=e?e.options:e,{name:"t",hash:{},data:o}))+"\n"},3:function(t,e,i,n,o){return"    "+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},e,{name:"t",hash:{},data:o}))+"\n"},compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){var s;return'<div class="error-message">\n'+(null!=(s=i["if"].call(null!=e?e:{},null!=e?e.msg:e,{name:"if",hash:{},fn:t.program(1,o,0),inverse:t.program(3,o,0),data:o}))?s:"")+"</div>"},useData:!0}),this.HandlebarsTemplates.error_message}.call(this),function(){Handlebars.registerPartial("portfolio/_empty",Handlebars.template({1:function(t,e,i,n,o){var s,r,a,l="    <h2>"+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_EMPTY_HEADLINE",{name:"t",hash:{},data:o}))+'</h2>\n    <span class="subheadline">'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_EMPTY_SUBHEADLINE",{name:"t",hash:{},data:o}))+"</span>\n\n    <ul>\n";return r=null!=(r=i.if_iPad||(null!=e?e.if_iPad:e))?r:i.helperMissing,a={name:"if_iPad",hash:{},fn:t.program(2,o,0),inverse:t.program(7,o,0),data:o},s="function"==typeof r?r.call(null!=e?e:{},a):r,i.if_iPad||(s=i.blockHelperMissing.call(e,s,a)),null!=s&&(l+=s),l+'    </ul>\n\n    <div class="button-center">\n      <button type="button" class="portfolio-add-btn for-empty-portfolio element-form-button-solid-lime">'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_BUTTON_ADD",{name:"t",hash:{},data:o}))+"</button>\n    </div>\n"},2:function(t,e,i,n,o){var s,r,a,l="";return r=null!=(r=i.if_greater_than_iOS_5||(null!=e?e.if_greater_than_iOS_5:e))?r:i.helperMissing,a={name:"if_greater_than_iOS_5",hash:{},fn:t.program(3,o,0),inverse:t.program(5,o,0),data:o},s="function"==typeof r?r.call(null!=e?e:{},a):r,i.if_greater_than_iOS_5||(s=i.blockHelperMissing.call(e,s,a)),null!=s&&(l+=s),l},3:function(t,e,i,n,o){var s;return'          <li>\n            <div class="portfolio-upload-text">\n              <p>'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_CHOICE_TEXT",{name:"t",hash:{},data:o}))+'</p>\n            </div>\n            <div class="description">\n              <h3>'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_DESCRIPTION_HL_TEXT",{name:"t",hash:{},data:o}))+"</h3>\n              <p>"+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_DESCRIPTION_TEXT",{name:"t",hash:{},data:o}))+'</p>\n            </div>\n          </li>\n\n          <li>\n            <div class="portfolio-upload-picture">\n              <p>'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_CHOICE_PICTURE",{name:"t",hash:{},data:o}))+'</p>\n              <form data-type="image">\n                <input name="authenticity_token" type="hidden" value="'+t.escapeExpression((s=null!=(s=i.getAuthenticityToken||(null!=e?e.getAuthenticityToken:e))?s:i.helperMissing,"function"==typeof s?s.call(null!=e?e:{},{name:"getAuthenticityToken",hash:{},data:o}):s))+'"/>\n                <input type="file" class="hidden-file-upload" name="asset">\n              </form>\n            </div>\n            <div class="description">\n              <h3>'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_DESCRIPTION_HL_PICTURE",{name:"t",hash:{},data:o}))+"</h3>\n              <p>"+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_DESCRIPTION_PICTURE",{name:"t",hash:{},data:o}))+"</p>\n            </div>\n          </li>\n"},5:function(t,e,i,n,o){return'          <li>\n            <div class="portfolio-upload-text">\n              <p>'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_CHOICE_TEXT",{name:"t",hash:{},data:o}))+'</p>\n            </div>\n            <div class="description">\n              <h3>'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_DESCRIPTION_HL_TEXT",{name:"t",hash:{},data:o}))+"</h3>\n              <p>"+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_DESCRIPTION_TEXT",{name:"t",hash:{},data:o}))+"</p>\n            </div>\n          </li>\n"},7:function(t,e,i,n,o){var s,r;return'        <li>\n          <div class="portfolio-upload-text">\n            <p>'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_CHOICE_TEXT",{name:"t",hash:{},data:o}))+'</p>\n          </div>\n          <div class="description">\n            <h3>'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_DESCRIPTION_HL_TEXT",{name:"t",hash:{},data:o}))+"</h3>\n            <p>"+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_DESCRIPTION_TEXT",{name:"t",hash:{},data:o}))+'</p>\n          </div>\n        </li>\n\n        <li>\n          <div class="portfolio-upload-picture">\n            <p>'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_CHOICE_PICTURE",{name:"t",hash:{},data:o}))+'</p>\n            <form data-type="image">\n              <input name="authenticity_token" type="hidden" value="'+t.escapeExpression((r=null!=(r=i.getAuthenticityToken||(null!=e?e.getAuthenticityToken:e))?r:i.helperMissing,"function"==typeof r?r.call(null!=e?e:{},{name:"getAuthenticityToken",hash:{},data:o}):r))+'"/>\n              <input type="file" class="hidden-file-upload" name="asset">\n            </form>\n          </div>\n          <div class="description">\n            <h3>'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_DESCRIPTION_HL_PICTURE",{name:"t",hash:{},data:o}))+"</h3>\n            <p>"+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_DESCRIPTION_PICTURE",{name:"t",hash:{},data:o}))+"</p>\n          </div>\n        </li>\n\n"+(null!=(s=i["if"].call(null!=e?e:{},null!=e?e.allowing_video:e,{name:"if",hash:{},fn:t.program(8,o,0),inverse:t.noop,data:o}))?s:"")+"\n"+(null!=(s=i["if"].call(null!=e?e:{},null!=e?e.allowing_pdf:e,{name:"if",hash:{},fn:t.program(13,o,0),inverse:t.noop,data:o}))?s:"")},8:function(t,e,i,n,o){var s,r,a,l="        <li>\n";return r=null!=(r=i.isVideoUpsell||(null!=e?e.isVideoUpsell:e))?r:i.helperMissing,a={name:"isVideoUpsell",hash:{},fn:t.program(9,o,0),inverse:t.program(11,o,0),data:o},s="function"==typeof r?r.call(null!=e?e:{},a):r,i.isVideoUpsell||(s=i.blockHelperMissing.call(e,s,a)),null!=s&&(l+=s),l+"        </li>\n"},9:function(t,e,i,n,o){var s,r;return'            <div data-href="/upsell/premium?op=premium_overview;reagent=uplt_151" class="portfolio-upload-video-upsell">\n              <p>'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_CHOICE_VIDEO",{name:"t",hash:{},data:o}))+'</p>\n            </div>\n            <div class="description">\n              <h3>\n                <a href="/upsell/premium?op=premium_overview;reagent=uplt_151" class="not-a-link">\n                  '+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_DESCRIPTION_HL_VIDEO",{name:"t",hash:{},data:o}))+'\n                  <span class="flag-premium">'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"VERTICAL_NAVIGATION_HEADER_SEARCH_PREMIUM_FLAG",{name:"t",hash:{},data:o}))+"</span>\n                </a>\n              </h3>\n              <p>"+(null!=(r=null!=(r=i.descriptionHintVideoUpsell||(null!=e?e.descriptionHintVideoUpsell:e))?r:i.helperMissing,s="function"==typeof r?r.call(null!=e?e:{},{name:"descriptionHintVideoUpsell",hash:{},data:o}):r)?s:"")+"</p>\n            </div>\n"},11:function(t,e,i,n,o){return'            <div class="portfolio-upload-video">\n              <p>'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_CHOICE_VIDEO",{name:"t",hash:{},data:o}))+'</p>\n            </div>\n            <div class="description">\n              <h3>'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_DESCRIPTION_HL_VIDEO",{name:"t",hash:{},data:o}))+"</h3>\n              <p>"+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_DESCRIPTION_VIDEO",{name:"t",hash:{},data:o}))+"</p>\n            </div>\n"},13:function(t,e,i,n,o){var s;return'        <li>\n          <div class="portfolio-upload-pdf">\n            <p>'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_CHOICE_PDF",{name:"t",hash:{},data:o}))+'</p>\n            <form data-type="pdf">\n              <input name="authenticity_token" type="hidden" value="'+t.escapeExpression((s=null!=(s=i.getAuthenticityToken||(null!=e?e.getAuthenticityToken:e))?s:i.helperMissing,"function"==typeof s?s.call(null!=e?e:{},{name:"getAuthenticityToken",hash:{},data:o}):s))+'"/>\n              <input type="file" class="hidden-file-upload" name="asset">\n            </form>\n          </div>\n          <div class="description">\n            <h3>'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_DESCRIPTION_HL_PDF",{name:"t",hash:{},data:o}))+"</h3>\n            <p>"+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_DESCRIPTION_PDF",{name:"t",hash:{},data:o}))+"</p>\n          </div>\n        </li>\n"},compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){var s,r,a,l='<div class="portfolio-empty">\n';return r=null!=(r=i.isCurrentUser||(null!=e?e.isCurrentUser:e))?r:i.helperMissing,a={name:"isCurrentUser",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o},s="function"==typeof r?r.call(null!=e?e:{},a):r,i.isCurrentUser||(s=i.blockHelperMissing.call(e,s,a)),null!=s&&(l+=s),l+"</div>"},useData:!0}))}.call(this),function(){Handlebars.registerPartial("portfolio/_filled",Handlebars.template({1:function(t,e,i,n,o){var s;return(null!=(s=(i.is||e&&e.is||i.helperMissing).call(null!=e?e:{},null!=e?e.type:e,"Portfolio::ImageTile",{name:"is",hash:{},fn:t.program(2,o,0),inverse:t.noop,data:o}))?s:"")+"\n"+(null!=(s=(i.is||e&&e.is||i.helperMissing).call(null!=e?e:{},null!=e?e.type:e,"Portfolio::TextTile",{name:"is",hash:{},fn:t.program(4,o,0),inverse:t.noop,data:o}))?s:"")+"\n"+(null!=(s=(i.is||e&&e.is||i.helperMissing).call(null!=e?e:{},null!=e?e.type:e,"Portfolio::PdfTile",{name:"is",hash:{},fn:t.program(6,o,0),inverse:t.noop,data:o}))?s:"")+"\n"+(null!=(s=(i.is||e&&e.is||i.helperMissing).call(null!=e?e:{},null!=e?e.type:e,"Portfolio::VideoTile",{name:"is",
hash:{},fn:t.program(8,o,0),inverse:t.noop,data:o}))?s:"")},2:function(t,e,i,n,o){var s;return null!=(s=t.invokePartial(n["portfolio/tiles/_image_tile"],e,{name:"portfolio/tiles/_image_tile",data:o,indent:"      ",helpers:i,partials:n,decorators:t.decorators}))?s:""},4:function(t,e,i,n,o){var s;return null!=(s=t.invokePartial(n["portfolio/tiles/_text_tile"],e,{name:"portfolio/tiles/_text_tile",data:o,indent:"      ",helpers:i,partials:n,decorators:t.decorators}))?s:""},6:function(t,e,i,n,o){var s;return null!=(s=t.invokePartial(n["portfolio/tiles/_pdf_tile"],e,{name:"portfolio/tiles/_pdf_tile",data:o,indent:"      ",helpers:i,partials:n,decorators:t.decorators}))?s:""},8:function(t,e,i,n,o){var s;return null!=(s=t.invokePartial(n["portfolio/tiles/_video_tile"],e,{name:"portfolio/tiles/_video_tile",data:o,indent:"      ",helpers:i,partials:n,decorators:t.decorators}))?s:""},compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){var s;return'<ul class="clfx">\n'+(null!=(s=i.each.call(null!=e?e:{},e,{name:"each",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o}))?s:"")+"</ul>"},usePartial:!0,useData:!0}))}.call(this),function(){Handlebars.registerPartial("portfolio/_tile_actions",Handlebars.template({1:function(t,e,i,n,o){var s;return null!=(s=(i.isNot||e&&e.isNot||i.helperMissing).call(null!=e?e:{},null!=e?e.type:e,"Portfolio::VideoTile",{name:"isNot",hash:{},fn:t.program(2,o,0),inverse:t.noop,data:o}))?s:""},2:function(t,e,i,n,o){var s;return null!=(s=t.invokePartial(n["portfolio/_tile_actions_general"],e,{name:"portfolio/_tile_actions_general",data:o,indent:"        ",helpers:i,partials:n,decorators:t.decorators}))?s:""},4:function(t,e,i,n,o){var s;return null!=(s=t.invokePartial(n["portfolio/_tile_actions_general"],e,{name:"portfolio/_tile_actions_general",data:o,indent:"      ",helpers:i,partials:n,decorators:t.decorators}))?s:""},compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){var s,r,a,l='<div id="tile-actions-trigger-'+t.escapeExpression(t.lambda(null!=e?e.id:e,e))+'">\n  <a data-simplelayer="#tile-actions-toggle-'+t.escapeExpression(t.lambda(null!=e?e.id:e,e))+'" href="#" class="tile-actions-trigger">\n    <img class="icn icn-ext-ctr-arrow-down-white" src="'+t.escapeExpression((r=null!=(r=i.getTransparentImage||(null!=e?e.getTransparentImage:e))?r:i.helperMissing,"function"==typeof r?r.call(null!=e?e:{},{name:"getTransparentImage",hash:{},data:o}):r))+'" alt="" />\n  </a>\n  <ul id="tile-actions-toggle-'+t.escapeExpression(t.lambda(null!=e?e.id:e,e))+'" class="dropdown" style="display: none">\n    <!-- Here we disable editing video (also maximisation and minimisation) for basic users that have uploaded 1 video before we switched the feature -->\n';return r=null!=(r=i.isVideoUpsell||(null!=e?e.isVideoUpsell:e))?r:i.helperMissing,a={name:"isVideoUpsell",hash:{},fn:t.program(1,o,0),inverse:t.program(4,o,0),data:o},s="function"==typeof r?r.call(null!=e?e:{},a):r,i.isVideoUpsell||(s=i.blockHelperMissing.call(e,s,a)),null!=s&&(l+=s),l+'\n    <li class="tile-action-delete">\n      <a href="#">\n        '+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_DROPDOWN_DELETE",{name:"t",hash:{},data:o}))+"\n      </a>\n    </li>\n  </ul>\n</div>"},usePartial:!0,useData:!0}))}.call(this),function(){Handlebars.registerPartial("portfolio/_tile_actions_general",Handlebars.template({1:function(t,e,i,n,o){var s;return(null!=(s=(i.isNot||e&&e.isNot||i.helperMissing).call(null!=e?e:{},null!=e?e.type:e,"Portfolio::TextTile",{name:"isNot",hash:{},fn:t.program(2,o,0),inverse:t.noop,data:o}))?s:"")+'  <li class="tile-action-edit">\n    <a href="#">\n      '+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_DROPDOWN_EDIT",{name:"t",hash:{},data:o}))+"\n    </a>\n  </li>\n"},2:function(t,e,i,n,o){var s;return'    <li class="tile-action-enlarge" '+(null!=(s=(i.is||e&&e.is||i.helperMissing).call(null!=e?e:{},null!=(s=null!=e?e.json_attributes:e)?s.overview:s,"thumbnail2x2",{name:"is",hash:{},fn:t.program(3,o,0),inverse:t.noop,data:o}))?s:"")+'>\n      <a href="#">\n        '+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_DROPDOWN_LARGE",{name:"t",hash:{},data:o}))+'\n      </a>\n    </li>\n    <li class="tile-action-minimize"'+(null!=(s=(i.isNot||e&&e.isNot||i.helperMissing).call(null!=e?e:{},null!=(s=null!=e?e.json_attributes:e)?s.overview:s,"thumbnail2x2",{name:"isNot",hash:{},fn:t.program(3,o,0),inverse:t.noop,data:o}))?s:"")+'>\n      <a href="#">\n        '+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_DROPDOWN_SMALL",{name:"t",hash:{},data:o}))+"\n      </a>\n    </li>\n"},3:function(){return'style="display: none;"'},5:function(t,e,i,n,o){var s;return'  <li class="tile-action-download-pdf">\n    <a href="'+t.escapeExpression(t.lambda(null!=(s=null!=e?e.asset:e)?s.url:s,e))+'">\n      '+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_DOWNLOAD",{name:"t",hash:{},data:o}))+"\n    </a>\n  </li>\n"},compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){var s;return(null!=(s=(i.isNot||e&&e.isNot||i.helperMissing).call(null!=e?e:{},null!=e?e.type:e,"Portfolio::PdfTile",{name:"isNot",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o}))?s:"")+"\n"+(null!=(s=(i.is||e&&e.is||i.helperMissing).call(null!=e?e:{},null!=e?e.type:e,"Portfolio::PdfTile",{name:"is",hash:{},fn:t.program(5,o,0),inverse:t.noop,data:o}))?s:"")},useData:!0}))}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["portfolio/lightboxes/carousel"]=Handlebars.template({1:function(){return" only-image"},3:function(){return" only-tile"},5:function(t,e,i,n,o){var s;return'      <iframe src="'+t.escapeExpression((s=null!=(s=i.embed_url||(null!=e?e.embed_url:e))?s:i.helperMissing,"function"==typeof s?s.call(null!=e?e:{},{name:"embed_url",hash:{},data:o}):s))+'" frameborder="0" allowfullscreen="allowfullscreen"></iframe>\n'},7:function(t,e){var i;return'      <img src="'+t.escapeExpression(t.lambda(null!=(i=null!=(i=null!=e?e.asset:e)?i.preview:i)?i.url:i,e))+'">\n'},compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){var s,r;return'<div class="spinner" style="display: block;"></div>\n\n<div class="portfolio-resource-contents'+(null!=(s=i.unless.call(null!=e?e:{},null!=e?e.hasText:e,{name:"unless",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o}))?s:"")+(null!=(s=i["if"].call(null!=e?e:{},null!=e?e.onlyTile:e,{name:"if",hash:{},fn:t.program(3,o,0),inverse:t.noop,data:o}))?s:"")+' image-dialog carousel-view">\n\n  <div class="image-holder">\n'+(null!=(s=(i.is||e&&e.is||i.helperMissing).call(null!=e?e:{},null!=e?e.type:e,"Portfolio::VideoTile",{name:"is",hash:{},fn:t.program(5,o,0),inverse:t.noop,data:o}))?s:"")+(null!=(s=(i.is||e&&e.is||i.helperMissing).call(null!=e?e:{},null!=e?e.type:e,"Portfolio::ImageTile",{name:"is",hash:{},fn:t.program(7,o,0),inverse:t.noop,data:o}))?s:"")+'\n    <a href="#" class="left ss-nav enabled">\n      <div class="ss-button"><span>Prev</span></div>\n    </a>\n\n    <a href="#" class="right ss-nav enabled">\n      <div class="ss-button"><span>Next</span></div>\n    </a>\n  </div>\n\n  <div class="text-holder formatted-text visible">\n    <h1>'+t.escapeExpression((r=null!=(r=i.title||(null!=e?e.title:e))?r:i.helperMissing,"function"==typeof r?r.call(null!=e?e:{},{name:"title",hash:{},data:o}):r))+"</h1>\n    "+(null!=(r=null!=(r=i.display_content||(null!=e?e.display_content:e))?r:i.helperMissing,s="function"==typeof r?r.call(null!=e?e:{},{name:"display_content",hash:{},data:o}):r)?s:"")+"\n  </div>\n</div>"},useData:!0}),this.HandlebarsTemplates["portfolio/lightboxes/carousel"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["portfolio/lightboxes/choose_upload"]=Handlebars.template({1:function(){return" for-ipad"},3:function(t,e,i,n,o){var s,r,a,l="";return r=null!=(r=i.if_greater_than_iOS_5||(null!=e?e.if_greater_than_iOS_5:e))?r:i.helperMissing,a={name:"if_greater_than_iOS_5",hash:{},fn:t.program(4,o,0),inverse:t.noop,data:o},s="function"==typeof r?r.call(null!=e?e:{},a):r,i.if_greater_than_iOS_5||(s=i.blockHelperMissing.call(e,s,a)),null!=s&&(l+=s),l},4:function(t,e,i,n,o){return"      <h1>"+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_CHOICE_MESSAGE",{name:"t",hash:{},data:o}))+"</h1>\n"},6:function(t,e,i,n,o){return"    <h1>"+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_CHOICE_MESSAGE",{name:"t",hash:{},data:o}))+"</h1>\n"},8:function(t,e,i,n,o){var s,r,a,l="";return r=null!=(r=i.if_greater_than_iOS_5||(null!=e?e.if_greater_than_iOS_5:e))?r:i.helperMissing,a={name:"if_greater_than_iOS_5",hash:{},fn:t.program(9,o,0),inverse:t.program(12,o,0),data:o},s="function"==typeof r?r.call(null!=e?e:{},a):r,i.if_greater_than_iOS_5||(s=i.blockHelperMissing.call(e,s,a)),null!=s&&(l+=s),l},9:function(t,e,i,n,o){var s,r,a,l='      <ul class="two-boxes">\n        <li>\n          <div class="portfolio-upload-text for-lightbox">\n            <p>'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_CHOICE_TEXT",{name:"t",hash:{},data:o}))+"</p>\n          </div>\n";return r=null!=(r=i.isBasic||(null!=e?e.isBasic:e))?r:i.helperMissing,a={name:"isBasic",hash:{},fn:t.program(10,o,0),inverse:t.noop,data:o},s="function"==typeof r?r.call(null!=e?e:{},a):r,i.isBasic||(s=i.blockHelperMissing.call(e,s,a)),null!=s&&(l+=s),l+'        </li>\n\n        <li>\n          <div class="portfolio-upload-picture">\n            <p>'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_CHOICE_PICTURE",{name:"t",hash:{},data:o}))+'</p>\n            <form data-type="image">\n              <input type="file" class="hidden-file-upload" name="asset" accept="image/*;capture=camera">\n              <input name="authenticity_token" type="hidden" value="'+t.escapeExpression((r=null!=(r=i.authenticityToken||(null!=e?e.authenticityToken:e))?r:i.helperMissing,"function"==typeof r?r.call(null!=e?e:{},{name:"authenticityToken",hash:{},data:o}):r))+'"/>\n            </form>\n          </div>\n          <p class="hint">\n            '+t.escapeExpression((r=null!=(r=i.choiceHintPicture||(null!=e?e.choiceHintPicture:e))?r:i.helperMissing,"function"==typeof r?r.call(null!=e?e:{},{name:"choiceHintPicture",hash:{},data:o}):r))+"\n          </p>\n        </li>\n      </ul>\n"},10:function(t,e,i,n,o){var s;return'            <p class="hint">\n              '+(null!=(s=(i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_CHOICE_HINT_TEXT_BASIC",{name:"t",hash:{},data:o}))?s:"")+"\n            </p>\n"},12:function(t,e,i,n,o){var s,r,a,l='      <ul class="one-box">\n        <li>\n          <div class="portfolio-upload-text for-lightbox">\n            <p>'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_CHOICE_TEXT",{name:"t",hash:{},data:o}))+"</p>\n          </div>\n";return r=null!=(r=i.isBasic||(null!=e?e.isBasic:e))?r:i.helperMissing,a={name:"isBasic",hash:{},fn:t.program(10,o,0),inverse:t.noop,data:o},s="function"==typeof r?r.call(null!=e?e:{},a):r,i.isBasic||(s=i.blockHelperMissing.call(e,s,a)),null!=s&&(l+=s),l+"        </li>\n      </ul>\n"},14:function(t,e,i,n,o){var s,r,a,l='    <ul class="four-boxes">\n      <li>\n        <div class="portfolio-upload-text for-lightbox">\n          <p>'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_CHOICE_TEXT",{name:"t",hash:{},data:o}))+"</p>\n        </div>\n";return r=null!=(r=i.isBasic||(null!=e?e.isBasic:e))?r:i.helperMissing,a={name:"isBasic",hash:{},fn:t.program(15,o,0),inverse:t.noop,data:o},s="function"==typeof r?r.call(null!=e?e:{},a):r,i.isBasic||(s=i.blockHelperMissing.call(e,s,a)),null!=s&&(l+=s),l+'      </li>\n\n      <li>\n        <div class="portfolio-upload-picture">\n          <p>'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_CHOICE_PICTURE",{name:"t",hash:{},data:o}))+'</p>\n          <form data-type="image">\n            <input type="file" id="image-upload-lightbox" class="hidden-file-upload" name="asset" accept="image/*;capture=camera">\n            <input name="authenticity_token" type="hidden" value="'+t.escapeExpression((r=null!=(r=i.authenticityToken||(null!=e?e.authenticityToken:e))?r:i.helperMissing,"function"==typeof r?r.call(null!=e?e:{},{name:"authenticityToken",hash:{},data:o}):r))+'"/>\n          </form>\n        </div>\n        <p class="hint">\n          '+(null!=(r=null!=(r=i.choiceHintPicture||(null!=e?e.choiceHintPicture:e))?r:i.helperMissing,s="function"==typeof r?r.call(null!=e?e:{},{name:"choiceHintPicture",hash:{},data:o}):r)?s:"")+"\n        </p>\n      </li>\n\n"+(null!=(s=i["if"].call(null!=e?e:{},null!=e?e.allowing_video:e,{name:"if",hash:{},fn:t.program(17,o,0),inverse:t.noop,data:o}))?s:"")+"\n"+(null!=(s=i["if"].call(null!=e?e:{},null!=e?e.allowing_pdf:e,{name:"if",hash:{},fn:t.program(22,o,0),inverse:t.noop,data:o}))?s:"")+"    </ul>\n"},15:function(t,e,i,n,o){var s;return'          <p class="hint">\n            '+(null!=(s=(i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_CHOICE_HINT_TEXT_BASIC",{name:"t",hash:{},data:o}))?s:"")+"\n          </p>\n"},17:function(t,e,i,n,o){var s,r,a,l="      <li>\n";return r=null!=(r=i.isVideoUpsell||(null!=e?e.isVideoUpsell:e))?r:i.helperMissing,a={name:"isVideoUpsell",hash:{},fn:t.program(18,o,0),inverse:t.program(20,o,0),data:o},s="function"==typeof r?r.call(null!=e?e:{},a):r,i.isVideoUpsell||(s=i.blockHelperMissing.call(e,s,a)),null!=s&&(l+=s),l+"      </li>\n"},18:function(t,e,i,n,o){var s,r;return'          <div data-href="/upsell/premium?op=premium_overview;reagent=uplt_151" class="portfolio-upload-video-upsell">\n            <p>'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_CHOICE_VIDEO",{name:"t",hash:{},data:o}))+'</p>\n          </div>\n          <p class="hint">\n            <a href="/upsell/premium?op=premium_overview;reagent=uplt_151" class="not-a-link">\n              <span class="flag-premium">'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"VERTICAL_NAVIGATION_HEADER_SEARCH_PREMIUM_FLAG",{name:"t",hash:{},data:o}))+"</span>\n            </a><br>\n            "+(null!=(r=null!=(r=i.choiceHintVideoUpsell||(null!=e?e.choiceHintVideoUpsell:e))?r:i.helperMissing,s="function"==typeof r?r.call(null!=e?e:{},{name:"choiceHintVideoUpsell",hash:{},data:o}):r)?s:"")+"\n          </p>\n"},20:function(t,e,i,n,o){var s,r;return'          <div class="portfolio-upload-video for-lightbox">\n            <p>'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_CHOICE_VIDEO",{name:"t",hash:{},data:o}))+'</p>\n          </div>\n          <p class="hint">\n            '+(null!=(r=null!=(r=i.choiceHintVideo||(null!=e?e.choiceHintVideo:e))?r:i.helperMissing,s="function"==typeof r?r.call(null!=e?e:{},{name:"choiceHintVideo",hash:{},data:o}):r)?s:"")+"\n          </p>\n"},22:function(t,e,i,n,o){var s,r;return'      <li>\n        <div class="portfolio-upload-pdf">\n          <p>'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_CHOICE_PDF",{name:"t",hash:{},data:o}))+'</p>\n          <form data-type="pdf">\n            <input name="authenticity_token" type="hidden" value="'+t.escapeExpression((r=null!=(r=i.authenticityToken||(null!=e?e.authenticityToken:e))?r:i.helperMissing,"function"==typeof r?r.call(null!=e?e:{},{name:"authenticityToken",hash:{},data:o}):r))+'"/>\n            <input type="file" class="hidden-file-upload" name="asset" id="pdf-upload-lightbox">\n          </form>\n        </div>\n        <p class="hint">\n          '+(null!=(r=null!=(r=i.choiceHintPdf||(null!=e?e.choiceHintPdf:e))?r:i.helperMissing,s="function"==typeof r?r.call(null!=e?e:{},{name:"choiceHintPdf",hash:{},data:o}):r)?s:"")+"\n        </p>\n      </li>\n"},compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){var s,r,a,l='<div class="portfolio-upload-contents ';return r=null!=(r=i.if_iPad||(null!=e?e.if_iPad:e))?r:i.helperMissing,a={name:"if_iPad",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o},s="function"==typeof r?r.call(null!=e?e:{},a):r,i.if_iPad||(s=i.blockHelperMissing.call(e,s,a)),null!=s&&(l+=s),l+='">\n  <div class="spinner big-spinner"></div>\n\n',r=null!=(r=i.if_iPad||(null!=e?e.if_iPad:e))?r:i.helperMissing,a={name:"if_iPad",hash:{},fn:t.program(3,o,0),inverse:t.program(6,o,0),data:o},s="function"==typeof r?r.call(null!=e?e:{},a):r,i.if_iPad||(s=i.blockHelperMissing.call(e,s,a)),null!=s&&(l+=s),l+="\n",r=null!=(r=i.if_iPad||(null!=e?e.if_iPad:e))?r:i.helperMissing,a={name:"if_iPad",hash:{},fn:t.program(8,o,0),inverse:t.program(14,o,0),data:o},s="function"==typeof r?r.call(null!=e?e:{},a):r,i.if_iPad||(s=i.blockHelperMissing.call(e,s,a)),null!=s&&(l+=s),l+"\n</div>"},useData:!0}),this.HandlebarsTemplates["portfolio/lightboxes/choose_upload"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["portfolio/lightboxes/crop"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){var s,r;return'<div class="portfolio-resource-contents image-dialog crop-dialog"\n     data-edit-tile-id="'+t.escapeExpression(t.lambda(null!=e?e.id:e,e))+'">\n\n  <div class="spinner big-spinner show"></div>\n\n  <div class="image-holder">\n    <img class="image-to-crop" src="'+t.escapeExpression(t.lambda(null!=(s=null!=e?e.asset:e)?s.url:s,e))+'" alt=""/>\n  </div>\n\n  <div class="text-holder">\n    <h2>'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_CROP_HEADLINE",{name:"t",hash:{},data:o}))+"</h2>\n    <p>"+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_CROP_EXPLANATION",{name:"t",hash:{},data:o}))+'</p>\n\n    <form\n      id="image-cropper-form"\n      method="POST"\n      action="'+t.escapeExpression((r=null!=(r=i.cropUrl||(null!=e?e.cropUrl:e))?r:i.helperMissing,"function"==typeof r?r.call(null!=e?e:{},{name:"cropUrl",hash:{},data:o}):r))+'">\n\n      <ul>\n        <li class="line form-row actions">\n          <div class="unit size1of1">\n            <div class="mod">\n              <button type="submit">'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_BUTTON_SAVE",{name:"t",hash:{},data:o}))+'</button>\n              <button type="button" class="lightbox-cancel button-as-link">'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"BUTTON_CANCEL",{name:"t",hash:{},data:o}))+'</button>\n            </div>\n          </div>\n        </li>\n      </ul>\n\n    </form>\n  </div>\n\n  <div class="sub-bar"></div>\n</div>'},useData:!0}),this.HandlebarsTemplates["portfolio/lightboxes/crop"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["portfolio/lightboxes/image_details"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){var s;return'<div class="portfolio-resource-contents image-dialog" data-edit-tile-id="'+t.escapeExpression(t.lambda(null!=e?e.id:e,e))+'">\n  <div class="spinner big-spinner"></div>\n\n  <div class="image-holder with-bg-img">\n    <img src="'+t.escapeExpression(t.lambda(null!=(s=null!=e?e.asset:e)?s.url:s,e))+'" alt=""/>\n  </div>\n\n  <div class="text-holder">\n    <form id="tile-edit">\n      <ul>\n        <li class="line form-row">\n          <div class="unit size1of1">\n            <div class="mod labeled">\n              <label for="title">'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_HEADLINE",{name:"t",hash:{},data:o}))+'</label>\n              <input\n                class="required text"\n                value="'+t.escapeExpression(t.lambda(null!=e?e.title:e,e))+'"\n                type="text"\n                id="resource-title"\n                name="title"\n                placeholder="'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_HEADLINE_PLACEHOLDER",{name:"t",hash:{},data:o}))+'"\n                maxlength="50">\n            </div>\n          </div>\n        </li>\n\n        <li class="line form-row">\n          <div class="unit size1of1">\n            <div class="mod labeled">\n              <label for="content">\n                '+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_DESCRIPTION",{name:"t",hash:{},data:o}))+'\n                <span class="info"><a href="#" class="icon-links icn-ext-ctr-info" title="info">info</a></span>\n              </label>\n              <textarea\n                class="required"\n                name="content"\n                maxlength="1000"\n                placeholder="'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_DESCRIPTION_PLACEHOLDER",{name:"t",hash:{},data:o}))+'">'+t.escapeExpression(t.lambda(null!=e?e.content:e,e))+'</textarea>\n            </div>\n          </div>\n        </li>\n\n        <li class="line form-row error-message"\n            style="display: none;">\n          <div class="unit size1of1">\n            <div class="mod">\n              '+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_UPLOAD_ERROR",{name:"t",hash:{},data:o}))+'\n            </div>\n          </div>\n        </li>\n\n        <li class="line form-row actions">\n          <div class="unit size1of1">\n            <div class="mod">\n              <button type="submit">'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_BUTTON_NEXT",{name:"t",hash:{},data:o}))+'</button>\n              <button type="button" class="lightbox-cancel button-as-link">'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"BUTTON_CANCEL",{name:"t",hash:{},data:o}))+'</button>\n            </div>\n          </div>\n        </li>\n\n      </ul>\n    </form>\n  </div>\n\n  <div class="sub-bar"></div>\n</div>'},useData:!0}),this.HandlebarsTemplates["portfolio/lightboxes/image_details"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["portfolio/lightboxes/limit"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){var s;return'<div class="limit-dialog">\n  <h2>'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_LIMIT_DIALOG_HL",{name:"t",hash:{},data:o}))+'</h2>\n  <p class="message">'+t.escapeExpression((s=null!=(s=i.errorMessage||(null!=e?e.errorMessage:e))?s:i.helperMissing,"function"==typeof s?s.call(null!=e?e:{},{name:"errorMessage",hash:{},data:o}):s))+'</p>\n  <p class="close">\n    <a href="#" class="button lightbox-cancel">'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_CLOSE",{name:"t",hash:{},data:o}))+"</a>\n  </p>\n</div>"},useData:!0}),this.HandlebarsTemplates["portfolio/lightboxes/limit"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["portfolio/lightboxes/pdf_details"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){var s;return'<div class="portfolio-resource-contents image-dialog" data-edit-tile-id="'+t.escapeExpression(t.lambda(null!=(s=null!=e?e.pdf_tile:e)?s.id:s,e))+'">\n  <div class="spinner"></div>\n\n  <div class="pdf-form-holder">\n    <h2>'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_EDIT_PDF_HEADLINE",{name:"t",hash:{},data:o}))+'</h2>\n    <p class="description">\n      '+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_EDIT_PDF_DESCRIPTION",{name:"t",hash:{},data:o}))+'\n    </p>\n    <form id="tile-edit">\n      <ul>\n        <li class="line form-row">\n          <div class="unit size1of1">\n            <div class="mod labeled">\n              <label for="title">'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_PDF_HEADLINE",{name:"t",hash:{},data:o}))+'</label>\n              <input class="required text pdf-title"\n                value="'+t.escapeExpression(t.lambda(null!=(s=null!=e?e.pdf_tile:e)?s.title:s,e))+'"\n                type="text" id="resource-title"\n                name="title"\n                autocomplete="off"\n                placeholder="'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_PDF_HEADLINE_PLACEHOLDER",{name:"t",hash:{},data:o}))+'"\n                maxlength="50">\n                <p class="error-message" style="display: none;">\n                  '+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_UPLOAD_PDF_ERROR",{name:"t",hash:{},data:o}))+'\n                </p>\n            </div>\n          </div>\n        </li>\n        <li class="line form-row actions">\n          <div class="unit size1of1">\n            <div class="mod">\n              <button type="submit">'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_BUTTON_SAVE",{name:"t",hash:{},data:o}))+'</button>\n              <button type="button" class="lightbox-cancel button-as-link">'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"BUTTON_CANCEL",{name:"t",hash:{},data:o}))+'</button>\n            </div>\n          </div>\n         </li>\n       </ul>\n    </form>\n  </div>\n\n  <div class="pdf-icon-holder">\n    <span>'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_PDF_HEADLINE_PLACEHOLDER",{name:"t",hash:{},data:o}))+'</span>\n  </div>\n\n  <div class="sub-bar"></div>\n</div>'},useData:!0}),this.HandlebarsTemplates["portfolio/lightboxes/pdf_details"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["portfolio/lightboxes/text_upload"]=Handlebars.template({1:function(){return"add-text"},compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){var s;return'<div\n  class="portfolio-resource-contents image-dialog edit-dialog"\n  data-edit-tile-id="'+t.escapeExpression(t.lambda(null!=e?e.id:e,e))+'">\n\n  <div class="spinner big-spinner"></div>\n\n  <div class="text-holder editing-mode '+(null!=(s=(i.is||e&&e.is||i.helperMissing).call(null!=e?e:{},null!=e?e.type:e,"Portfolio::TextTile",{name:"is",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o}))?s:"")+'">\n    <form id="tile-edit">\n      <ul>\n        <li class="line form-row">\n          <div class="unit size1of1">\n            <div class="mod labeled">\n              <label for="title">'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_HEADLINE",{name:"t",hash:{},data:o}))+'</label>\n              <input\n                class="required text"\n                value="'+t.escapeExpression(t.lambda(null!=e?e.title:e,e))+'"\n                type="text"\n                id="resource-title"\n                name="title"\n                placeholder="'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_HEADLINE_PLACEHOLDER",{name:"t",hash:{},data:o}))+'"\n                maxlength="50">\n            </div>\n          </div>\n        </li>\n\n        <li class="line form-row">\n          <div class="unit size1of1">\n            <div class="mod labeled">\n              <label for="content">\n                '+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_DESCRIPTION",{name:"t",hash:{},data:o}))+'\n                <span class="info"><a href="#" class="icon-links icn-ext-ctr-info" title="info">info</a></span>\n              </label>\n              <textarea\n                class="required"\n                name="content"\n                placeholder="'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_DESCRIPTION_PLACEHOLDER",{name:"t",hash:{},data:o}))+'">'+t.escapeExpression(t.lambda(null!=e?e.content:e,e))+'</textarea>\n            </div>\n          </div>\n        </li>\n\n        <li class="line form-row error-message" style="display: none;">\n          <div class="unit size1of1">\n            <div class="mod">\n              '+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_UPLOAD_ERROR",{name:"t",hash:{},data:o}))+'\n            </div>\n          </div>\n        </li>\n\n        <li class="line form-row actions">\n          <div class="unit size1of1">\n            <div class="mod">\n              <button type="submit">'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_BUTTON_SAVE",{name:"t",hash:{},data:o}))+'</button>\n              <button type="button" class="lightbox-cancel button-as-link">'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"BUTTON_CANCEL",{name:"t",hash:{},data:o}))+'</button>\n            </div>\n          </div>\n        </li>\n\n      </ul>\n    </form>\n  </div>\n\n  <div class="sub-bar"></div>\n</div>'},useData:!0}),this.HandlebarsTemplates["portfolio/lightboxes/text_upload"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["portfolio/lightboxes/video_upload"]=Handlebars.template({1:function(){return" image-loaded"},compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){var s;return'<div class="portfolio-resource-contents video-dialog'+(null!=(s=i["if"].call(null!=e?e:{},null!=e?e.imageLoaded:e,{name:"if",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o}))?s:"")+'" data-edit-tile-id="'+t.escapeExpression(t.lambda(null!=e?e.id:e,e))+'">\n  <div class="initial-view clfx">\n    <h2>'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_CHOICE_VIDEO",{name:"t",hash:{},data:o}))+'</h2>\n\n    <div class="spinner big-spinner"></div>\n\n    <div class="text-holder add-video">\n      <form>\n        <ul>\n          <li class="line form-row">\n            <div class="unit size1of1">\n              <div class="mod input-wrap">\n                <input\n                  class="required text"\n                  value="'+t.escapeExpression(t.lambda(null!=e?e.link:e,e))+'"\n                  type="text"\n                  name="link"\n                  placeholder="'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_LINK_PLACEHOLDER",{name:"t",hash:{},data:o}))+'">\n                <i class="loading-video" style="display: none;"></i>\n              </div>\n            </div>\n          </li>\n\n          <li class="line form-row error-message" style="display: none;">\n            <div class="unit size1of1">\n              <div class="mod">\n                '+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_LINK_ERROR",{name:"t",hash:{},data:o}))+'\n              </div>\n            </div>\n          </li>\n        </ul>\n      </form>\n    </div>\n  </div>\n  <div class="image-view edit-dialog">\n    <div class="image-holder">\n      <iframe src="'+t.escapeExpression(t.lambda(null!=e?e.embed_url:e,e))+'" frameborder="0" allowfullscreen="allowfullscreen"></iframe>\n    </div>\n\n    <div class="text-holder">\n      <form>\n        <ul>\n          <li class="line form-row">\n            <div class="unit size1of1">\n              <div class="mod labeled">\n                <h2 for="link">'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_LINK_LABEL",{name:"t",hash:{},data:o}))+"</h2>\n                <p>"+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_LINK_INTRO",{name:"t",hash:{},data:o}))+'</p>\n                <input\n                  class="required text"\n                  value="'+t.escapeExpression(t.lambda(null!=e?e.link:e,e))+'"\n                  type="text"\n                  name="link"\n                  placeholder="'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_LINK_PLACEHOLDER",{name:"t",hash:{},data:o}))+'">\n                <i class="loading-video" style="display: none;"></i>\n              </div>\n            </div>\n          </li>\n\n          <li class="line form-row error-message" style="display: none;">\n            <div class="unit size1of1">\n              <div class="mod">\n                '+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_LINK_ERROR",{name:"t",hash:{},data:o}))+'\n              </div>\n            </div>\n          </li>\n\n          <li class="line form-row actions">\n            <div class="unit size1of1">\n              <div class="mod">\n                <button type="submit">'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_BUTTON_NEXT",{name:"t",hash:{},data:o
}))+'</button>\n                <button type="button" class="lightbox-cancel button-as-link">'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"BUTTON_CANCEL",{name:"t",hash:{},data:o}))+'</button>\n              </div>\n            </div>\n          </li>\n\n        </ul>\n      </form>\n    </div>\n    <div class="sub-bar"></div>\n  </div>\n</div>'},useData:!0}),this.HandlebarsTemplates["portfolio/lightboxes/video_upload"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["portfolio/tiles"]=Handlebars.template({1:function(){return"overlimit-image-pdf"},3:function(){return" overlimit-text"},5:function(t,e,i,n,o){return'    <div class="button-right comm-button-row">\n      <button class="portfolio-add-btn element-form-button-solid-lime" type="button">'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_BUTTON_ADD",{name:"t",hash:{},data:o}))+"</button>\n    </div>\n"},7:function(t,e,i,n,o){var s;return(null!=(s=i["if"].call(null!=e?e:{},null!=e?e.basic:e,{name:"if",hash:{},fn:t.program(8,o,0),inverse:t.noop,data:o}))?s:"")+"\n"+(null!=(s=i["if"].call(null!=e?e:{},null!=e?e.downgradeOverLimitImageAndPdf:e,{name:"if",hash:{},fn:t.program(11,o,0),inverse:t.noop,data:o}))?s:"")+"\n"+(null!=(s=i["if"].call(null!=e?e:{},null!=e?e.downgradeOverLimitText:e,{name:"if",hash:{},fn:t.program(13,o,0),inverse:t.noop,data:o}))?s:"")+"\n"+(null!=(s=i.unless.call(null!=e?e:{},null!=e?e.basic:e,{name:"unless",hash:{},fn:t.program(15,o,0),inverse:t.noop,data:o}))?s:"")+"\n"},8:function(t,e,i,n,o){var s;return null!=(s=i["if"].call(null!=e?e:{},null!=e?e.isOverLimit:e,{name:"if",hash:{},fn:t.program(9,o,0),inverse:t.noop,data:o}))?s:""},9:function(t,e,i,n,o){var s,r;return'        <div id="upsell-teaser" class="portfolio-upsell-teaser">\n          <h4>'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_UPGRADE_HL",{name:"t",hash:{},data:o}))+"</h4>\n          <p>"+(null!=(r=null!=(r=i.overLimitMessage||(null!=e?e.overLimitMessage:e))?r:i.helperMissing,s="function"==typeof r?r.call(null!=e?e:{},{name:"overLimitMessage",hash:{},data:o}):r)?s:"")+'</p>\n          <a href="/app/billing?op=premium_overview;reagent=uplt_151" class="button">'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_BUTTON_UPGRADE",{name:"t",hash:{},data:o}))+"</a>\n        </div>\n"},11:function(t,e,i,n,o){var s;return'      <p class="sys-alert-message">\n        '+t.escapeExpression((s=null!=(s=i.fencingAssetError||(null!=e?e.fencingAssetError:e))?s:i.helperMissing,"function"==typeof s?s.call(null!=e?e:{},{name:"fencingAssetError",hash:{},data:o}):s))+"\n      </p>\n"},13:function(t,e,i,n,o){var s;return'      <p class="sys-alert-message">\n        '+t.escapeExpression((s=null!=(s=i.fencingTextError||(null!=e?e.fencingTextError:e))?s:i.helperMissing,"function"==typeof s?s.call(null!=e?e:{},{name:"fencingTextError",hash:{},data:o}):s))+"\n      </p>\n"},15:function(t,e,i,n,o){var s;return null!=(s=i["if"].call(null!=e?e:{},null!=e?e.downgradeOverLimitVideo:e,{name:"if",hash:{},fn:t.program(16,o,0),inverse:t.noop,data:o}))?s:""},16:function(t,e,i,n,o){var s;return'        <p class="sys-alert-message">\n          '+t.escapeExpression((s=null!=(s=i.fencingVideoError||(null!=e?e.fencingVideoError:e))?s:i.helperMissing,"function"==typeof s?s.call(null!=e?e:{},{name:"fencingVideoError",hash:{},data:o}):s))+"\n        </p>\n"},18:function(t,e,i,n,o){var s;return null!=(s=t.invokePartial(n["portfolio/_empty"],e,{name:"portfolio/_empty",data:o,indent:"      ",helpers:i,partials:n,decorators:t.decorators}))?s:""},20:function(t,e,i,n,o){var s;return null!=(s=t.invokePartial(n["portfolio/_filled"],null!=e?e.collection:e,{name:"portfolio/_filled",data:o,indent:"      ",helpers:i,partials:n,decorators:t.decorators}))?s:""},compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){var s,r,a,l='<section id="portfolio-tab" class="foundation-new-form portfolio-container '+(null!=(s=i["if"].call(null!=e?e:{},null!=e?e.downgradeOverLimitImageAndPdf:e,{name:"if",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o}))?s:"")+(null!=(s=i["if"].call(null!=e?e:{},null!=e?e.downgradeOverLimitText:e,{name:"if",hash:{},fn:t.program(3,o,0),inverse:t.noop,data:o}))?s:"")+'">\n';return r=null!=(r=i.isCurrentUser||(null!=e?e.isCurrentUser:e))?r:i.helperMissing,a={name:"isCurrentUser",hash:{},fn:t.program(5,o,0),inverse:t.noop,data:o},s="function"==typeof r?r.call(null!=e?e:{},a):r,i.isCurrentUser||(s=i.blockHelperMissing.call(e,s,a)),null!=s&&(l+=s),l+="\n  <h2>"+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"TAB_HL_PORTFOLIO",{name:"t",hash:{},data:o}))+"</h2>\n\n",r=null!=(r=i.isCurrentUser||(null!=e?e.isCurrentUser:e))?r:i.helperMissing,a={name:"isCurrentUser",hash:{},fn:t.program(7,o,0),inverse:t.noop,data:o},s="function"==typeof r?r.call(null!=e?e:{},a):r,i.isCurrentUser||(s=i.blockHelperMissing.call(e,s,a)),null!=s&&(l+=s),l+'\n  <div class="tiles-container">\n'+(null!=(s=i["if"].call(null!=e?e:{},null!=e?e.empty:e,{name:"if",hash:{},fn:t.program(18,o,0),inverse:t.program(20,o,0),data:o}))?s:"")+"  </div>\n</section>"},usePartial:!0,useData:!0}),this.HandlebarsTemplates["portfolio/tiles"]}.call(this),function(){Handlebars.registerPartial("portfolio/tiles/_image_tile",Handlebars.template({1:function(t,e){var i;return'    <img src="'+t.escapeExpression(t.lambda(null!=(i=null!=(i=null!=e?e.asset:e)?i.thumbnail2x2:i)?i.url:i,e))+'" class="image-tile-source drag-handle open-tile" ondragstart="return false" alt="" />\n'},3:function(t,e){var i;return'    <img src="'+t.escapeExpression(t.lambda(null!=(i=null!=(i=null!=e?e.asset:e)?i.thumbnail1x1:i)?i.url:i,e))+'" class="image-tile-source drag-handle open-tile" ondragstart="return false" alt="" />\n'},5:function(t,e,i,n,o){var s;return null!=(s=t.invokePartial(n["portfolio/_tile_actions"],e,{name:"portfolio/_tile_actions",data:o,helpers:i,partials:n,decorators:t.decorators}))?s:""},7:function(t,e){return'    <div class="tile-description drag-handle open-tile">\n      <div class="description-wrapper">\n        <h2>'+t.escapeExpression(t.lambda(null!=e?e.title:e,e))+"</h2>\n      </div>\n    </div>\n"},compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){var s,r,a,l='<li class="image-tile '+t.escapeExpression(t.lambda(null!=(s=null!=e?e.json_attributes:e)?s.overview:s,e))+'" data-tile-id="'+t.escapeExpression((r=null!=(r=i.id||(null!=e?e.id:e))?r:i.helperMissing,"function"==typeof r?r.call(null!=e?e:{},{name:"id",hash:{},data:o}):r))+'" style="left:'+t.escapeExpression((r=null!=(r=i.x||(null!=e?e.x:e))?r:i.helperMissing,"function"==typeof r?r.call(null!=e?e:{},{name:"x",hash:{},data:o}):r))+"px; top:"+t.escapeExpression((r=null!=(r=i.y||(null!=e?e.y:e))?r:i.helperMissing,"function"==typeof r?r.call(null!=e?e:{},{name:"y",hash:{},data:o}):r))+'px">\n\n'+(null!=(s=(i.ifEqual||e&&e.ifEqual||i.helperMissing).call(null!=e?e:{},null!=(s=null!=e?e.json_attributes:e)?s.overview:s,"thumbnail2x2",{name:"ifEqual",hash:{},fn:t.program(1,o,0),inverse:t.program(3,o,0),data:o}))?s:"")+"\n  ";return r=null!=(r=i.isCurrentUser||(null!=e?e.isCurrentUser:e))?r:i.helperMissing,a={name:"isCurrentUser",hash:{},fn:t.program(5,o,0),inverse:t.noop,data:o},s="function"==typeof r?r.call(null!=e?e:{},a):r,i.isCurrentUser||(s=i.blockHelperMissing.call(e,s,a)),null!=s&&(l+=s),l+"\n\n"+(null!=(s=i["if"].call(null!=e?e:{},null!=e?e.title:e,{name:"if",hash:{},fn:t.program(7,o,0),inverse:t.noop,data:o}))?s:"")+"</li>"},usePartial:!0,useData:!0}))}.call(this),function(){Handlebars.registerPartial("portfolio/tiles/_pdf_tile",Handlebars.template({1:function(t,e,i,n,o){var s;return null!=(s=t.invokePartial(n["portfolio/_tile_actions"],e,{name:"portfolio/_tile_actions",data:o,helpers:i,partials:n,decorators:t.decorators}))?s:""},3:function(t,e){return"      <h2>"+t.escapeExpression(t.lambda(null!=e?e.title:e,e))+"</h2>\n"},5:function(t,e,i,n,o){var s,r,a;return r=null!=(r=i.isLoggedIn||(null!=e?e.isLoggedIn:e))?r:i.helperMissing,a={name:"isLoggedIn",hash:{},fn:t.program(6,o,0),inverse:t.noop,data:o},s="function"==typeof r?r.call(null!=e?e:{},a):r,i.isLoggedIn||(s=i.blockHelperMissing.call(e,s,a)),null!=s?s:""},6:function(t,e,i,n,o){var s;return'\n      <div class="download-overlay">\n        <a href="'+t.escapeExpression(t.lambda(null!=(s=null!=e?e.asset:e)?s.url:s,e))+'" class="download-overlay-wrapper tile-action-download-pdf">\n          <span>'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_DOWNLOAD",{name:"t",hash:{},data:o}))+"</span>\n        </a>\n      </div>\n    "},compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){var s,r,a,l='<li class="pdf-tile" data-tile-id="'+t.escapeExpression((r=null!=(r=i.id||(null!=e?e.id:e))?r:i.helperMissing,"function"==typeof r?r.call(null!=e?e:{},{name:"id",hash:{},data:o}):r))+'" style="left:'+t.escapeExpression((r=null!=(r=i.x||(null!=e?e.x:e))?r:i.helperMissing,"function"==typeof r?r.call(null!=e?e:{},{name:"x",hash:{},data:o}):r))+"px; top:"+t.escapeExpression((r=null!=(r=i.y||(null!=e?e.y:e))?r:i.helperMissing,"function"==typeof r?r.call(null!=e?e:{},{name:"y",hash:{},data:o}):r))+'px">\n  ';return r=null!=(r=i.isCurrentUser||(null!=e?e.isCurrentUser:e))?r:i.helperMissing,a={name:"isCurrentUser",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o},s="function"==typeof r?r.call(null!=e?e:{},a):r,i.isCurrentUser||(s=i.blockHelperMissing.call(e,s,a)),null!=s&&(l+=s),l+='\n  <div class="drag-handle">\n'+(null!=(s=i["if"].call(null!=e?e:{},null!=e?e.title:e,{name:"if",hash:{},fn:t.program(3,o,0),inverse:t.noop,data:o}))?s:"")+"    ",r=null!=(r=i.isNotCurrentUser||(null!=e?e.isNotCurrentUser:e))?r:i.helperMissing,a={name:"isNotCurrentUser",hash:{},fn:t.program(5,o,0),inverse:t.noop,data:o},s="function"==typeof r?r.call(null!=e?e:{},a):r,i.isNotCurrentUser||(s=i.blockHelperMissing.call(e,s,a)),null!=s&&(l+=s),l+"\n  </div>\n</li>"},usePartial:!0,useData:!0}))}.call(this),function(){Handlebars.registerPartial("portfolio/tiles/_text_tile",Handlebars.template({1:function(t,e,i,n,o){var s;return null!=(s=t.invokePartial(n["portfolio/_tile_actions"],e,{name:"portfolio/_tile_actions",data:o,helpers:i,partials:n,decorators:t.decorators}))?s:""},3:function(t,e){return"          <h2>"+t.escapeExpression(t.lambda(null!=e?e.title:e,e))+"</h2>\n"},5:function(t,e){var i;return"          "+(null!=(i=t.lambda(null!=e?e.display_content:e,e))?i:"")+"\n"},compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){var s,r,a,l='<li class="text-tile" data-tile-id="'+t.escapeExpression((r=null!=(r=i.id||(null!=e?e.id:e))?r:i.helperMissing,"function"==typeof r?r.call(null!=e?e:{},{name:"id",hash:{},data:o}):r))+'" style="left:'+t.escapeExpression((r=null!=(r=i.x||(null!=e?e.x:e))?r:i.helperMissing,"function"==typeof r?r.call(null!=e?e:{},{name:"x",hash:{},data:o}):r))+"px; top:"+t.escapeExpression((r=null!=(r=i.y||(null!=e?e.y:e))?r:i.helperMissing,"function"==typeof r?r.call(null!=e?e:{},{name:"y",hash:{},data:o}):r))+'px">\n  ';return r=null!=(r=i.isCurrentUser||(null!=e?e.isCurrentUser:e))?r:i.helperMissing,a={name:"isCurrentUser",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o},s="function"==typeof r?r.call(null!=e?e:{},a):r,i.isCurrentUser||(s=i.blockHelperMissing.call(e,s,a)),null!=s&&(l+=s),l+'\n\n  <div class="tile-description drag-handle">\n    <div class="description-wrapper formatted-text">\n'+(null!=(s=i["if"].call(null!=e?e:{},null!=e?e.title:e,{name:"if",hash:{},fn:t.program(3,o,0),inverse:t.noop,data:o}))?s:"")+"\n"+(null!=(s=i["if"].call(null!=e?e:{},null!=e?e.display_content:e,{name:"if",hash:{},fn:t.program(5,o,0),inverse:t.noop,data:o}))?s:"")+"    </div>\n  </div>\n\n</li>"},usePartial:!0,useData:!0}))}.call(this),function(){Handlebars.registerPartial("portfolio/tiles/_video_tile",Handlebars.template({1:function(t,e){var i;return'    <img src="'+t.escapeExpression(t.lambda(null!=(i=null!=(i=null!=e?e.asset:e)?i.thumbnail2x2:i)?i.url:i,e))+'" class="image-tile-source drag-handle open-tile" ondragstart="return false" alt="" />\n'},3:function(t,e){var i;return'    <img src="'+t.escapeExpression(t.lambda(null!=(i=null!=(i=null!=e?e.asset:e)?i.thumbnail1x1:i)?i.url:i,e))+'" class="image-tile-source drag-handle open-tile" ondragstart="return false" alt="" />\n'},5:function(t,e,i,n,o){var s;return null!=(s=t.invokePartial(n["portfolio/_tile_actions"],e,{name:"portfolio/_tile_actions",data:o,helpers:i,partials:n,decorators:t.decorators}))?s:""},7:function(t,e){return'    <div class="tile-description drag-handle open-tile">\n      <div class="description-wrapper">\n        <h2>'+t.escapeExpression(t.lambda(null!=e?e.title:e,e))+"</h2>\n      </div>\n    </div>\n"},compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){var s,r,a,l='<li class="video-tile '+t.escapeExpression(t.lambda(null!=(s=null!=e?e.json_attributes:e)?s.overview:s,e))+'" data-tile-id="'+t.escapeExpression((r=null!=(r=i.id||(null!=e?e.id:e))?r:i.helperMissing,"function"==typeof r?r.call(null!=e?e:{},{name:"id",hash:{},data:o}):r))+'" style="left:'+t.escapeExpression((r=null!=(r=i.x||(null!=e?e.x:e))?r:i.helperMissing,"function"==typeof r?r.call(null!=e?e:{},{name:"x",hash:{},data:o}):r))+"px; top:"+t.escapeExpression((r=null!=(r=i.y||(null!=e?e.y:e))?r:i.helperMissing,"function"==typeof r?r.call(null!=e?e:{},{name:"y",hash:{},data:o}):r))+'px">\n\n'+(null!=(s=(i.ifEqual||e&&e.ifEqual||i.helperMissing).call(null!=e?e:{},null!=(s=null!=e?e.json_attributes:e)?s.overview:s,"thumbnail2x2",{name:"ifEqual",hash:{},fn:t.program(1,o,0),inverse:t.program(3,o,0),data:o}))?s:"")+"\n  ";return r=null!=(r=i.isCurrentUser||(null!=e?e.isCurrentUser:e))?r:i.helperMissing,a={name:"isCurrentUser",hash:{},fn:t.program(5,o,0),inverse:t.noop,data:o},s="function"==typeof r?r.call(null!=e?e:{},a):r,i.isCurrentUser||(s=i.blockHelperMissing.call(e,s,a)),null!=s&&(l+=s),l+"\n\n"+(null!=(s=i["if"].call(null!=e?e:{},null!=e?e.title:e,{name:"if",hash:{},fn:t.program(7,o,0),inverse:t.noop,data:o}))?s:"")+'  <span class="play-icon open-tile"><i></i></span>\n</li>'},usePartial:!0,useData:!0}))}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["portfolio/tiles/tile"]=Handlebars.template({1:function(t,e,i,n,o){var s;return null!=(s=t.invokePartial(n["portfolio/tiles/_image_tile"],e,{name:"portfolio/tiles/_image_tile",data:o,indent:"  ",helpers:i,partials:n,decorators:t.decorators}))?s:""},3:function(t,e,i,n,o){var s;return null!=(s=t.invokePartial(n["portfolio/tiles/_text_tile"],e,{name:"portfolio/tiles/_text_tile",data:o,indent:"  ",helpers:i,partials:n,decorators:t.decorators}))?s:""},5:function(t,e,i,n,o){var s;return null!=(s=t.invokePartial(n["portfolio/tiles/_pdf_tile"],e,{name:"portfolio/tiles/_pdf_tile",data:o,indent:"  ",helpers:i,partials:n,decorators:t.decorators}))?s:""},7:function(t,e,i,n,o){var s;return null!=(s=t.invokePartial(n["portfolio/tiles/_video_tile"],e,{name:"portfolio/tiles/_video_tile",data:o,indent:"  ",helpers:i,partials:n,decorators:t.decorators}))?s:""},compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){var s;return(null!=(s=(i.is||e&&e.is||i.helperMissing).call(null!=e?e:{},null!=e?e.type:e,"Portfolio::ImageTile",{name:"is",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o}))?s:"")+"\n"+(null!=(s=(i.is||e&&e.is||i.helperMissing).call(null!=e?e:{},null!=e?e.type:e,"Portfolio::TextTile",{name:"is",hash:{},fn:t.program(3,o,0),inverse:t.noop,data:o}))?s:"")+"\n"+(null!=(s=(i.is||e&&e.is||i.helperMissing).call(null!=e?e:{},null!=e?e.type:e,"Portfolio::PdfTile",{name:"is",hash:{},fn:t.program(5,o,0),inverse:t.noop,data:o}))?s:"")+"\n"+(null!=(s=(i.is||e&&e.is||i.helperMissing).call(null!=e?e:{},null!=e?e.type:e,"Portfolio::VideoTile",{name:"is",hash:{},fn:t.program(7,o,0),inverse:t.noop,data:o}))?s:"")},usePartial:!0,useData:!0}),this.HandlebarsTemplates["portfolio/tiles/tile"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["sections/common/notification"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){var s;return'<div title="'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_BUTTON_CLOSEWINDOW",{name:"t",hash:{},data:o}))+'">\n  '+(null!=(s=t.lambda(e,e))?s:"")+'\n  <a href="#" class="close" title="'+t.escapeExpression((i.t||e&&e.t||i.helperMissing).call(null!=e?e:{},"PORTFOLIO_BUTTON_CLOSEWINDOW",{name:"t",hash:{},data:o}))+'">X</a>\n</div>'},useData:!0}),this.HandlebarsTemplates["sections/common/notification"]}.call(this),xing.define("portfolio.fencing",{_limitReached:function(t,e,i){var n=xing.portfolio.config.fencing[i],o=t.filter(function(t){return-1!==e.indexOf(t.type)}).length;return[o>=n,o>n]},checkLimits:function(t){var e=this._limitReached(t,["Portfolio::ImageTile","Portfolio::PdfTile"],"maxAssetTilesCount"),i=this._limitReached(t,["Portfolio::TextTile"],"maxTextTilesCount"),n=this._limitReached(t,["Portfolio::VideoTile"],"maxVideoTilesCount");return{downgradeOverLimitImageAndPdf:e[1],downgradeOverLimitText:i[1],downgradeOverLimitVideo:n[1],limitReachedImageAndPdf:e[0],limitReachedText:i[0],limitReachedVideo:n[0],anyLimitReached:e[0]||i[0]}}}),Handlebars.registerHelper("t",function(t,e){return e=e?e.hash:{},Object.keys(e).forEach(function(t){e[t]instanceof Handlebars.SafeString||(e[t]=Handlebars.Utils.escapeExpression(e[t]))},this),new Handlebars.SafeString(xing.i18n.t(t,e))}),Handlebars.registerHelper("isCurrentUser",function(t){return xing.portfolio.config.editable?t.fn(this):t.inverse(this)}),Handlebars.registerHelper("isLoggedIn",function(t){return xing.portfolio.config.loggedIn?t.fn(this):t.inverse(this)}),Handlebars.registerHelper("isNotCurrentUser",function(t){return xing.portfolio.config.editable?t.inverse(this):t.fn(this)}),Handlebars.registerHelper("descriptionHintVideoUpsell",function(){return new Handlebars.SafeString(xing.i18n.t("PORTFOLIO_DESCRIPTION_VIDEO_UPSELL",{href:'href="/upsell/premium?op=premium_overview;reagent=uplt_151"'}))}),Handlebars.registerHelper("isBasic",function(t){return xing.portfolio.config.basic?t.fn(this):t.inverse(this)}),Handlebars.registerHelper("is",function(t,e,i){return(t&&t.toString())===(e&&e.toString())?i.fn(this):i.inverse(this)}),Handlebars.registerHelper("isNot",function(t,e,i){if(t!==e)return i.fn(this)}),Handlebars.registerHelper("ifEqual",function(t,e,i){return t===e?i.fn(this):i.inverse(this)}),Handlebars.registerHelper("getAuthenticityToken",function(){return xing.portfolio.config.authenticityToken}),Handlebars.registerHelper("if_iPad",function(t){return xing.portfolio.config.iPad?t.fn(this):t.inverse(this)}),Handlebars.registerHelper("if_greater_than_iOS_5",function(t){if(!xing.portfolio.config.iOS)return t.inverse(this);var e=xing.portfolio.config.iOS[6],i=xing.portfolio.config.iOS[7],n=xing.portfolio.config.iOS[8];return e||i||n?t.fn(this):t.inverse(this)}),Handlebars.registerHelper("getTransparentImage",function(){return xing.portfolio.config.transparentImage}),Handlebars.registerHelper("isVideoUpsell",function(t){return xing.portfolio.config.fencing.maxVideoTilesCount?t.inverse(this):t.fn(this)}),xing.i18n||xing.define("i18n",function(){return{locale:{},t:function(){}}}()),function(){var t=new RegExp("%{(.*?)}","g");xing.i18n.t=function(e,i){var n=this.locale[xing.portfolio.config.lang],o=n[xing.portfolio.config.i18nPrefix+e]||n[e];return o?i&&("object"===$.type(o)&&Object.keys(i).forEach(function(t){var e=i[t];"number"===$.type(e)&&(o=1===e?o.one:o.other)},this),o=o.replace(t,function(t,e){return i[e]})):o=e.toLowerCase()+" [TM]",o}}(),xing.define("portfolio.RestSync",function(){function t(t,e,i){return $.ajax($.extend({dataType:"json",processData:!1,contentType:"application/json"},t)).done(e||function(){}).error(i||function(){})}function e(t,e){return $.isFunction(t)?t(e):t}return Class.create({initialize:function(t){this.api=t,this.klass=t.constructor||Object},findAll:function(i,n){var o=this.klass;return t({url:e(this.api.index,{}),type:"GET"},function(t,e,n){var s=$.map(t,function(t){return new o(t)});i&&i(s,e,n)},n)},find:function(i,n,o){return t({url:e(this.api.read,"number"==typeof i?{id:i}:i),type:"GET"},n,o)},update:function(i,n,o){return t({url:e(this.api.update,i),type:"POST",data:JSON.stringify(i),beforeSend:function(t){t.setRequestHeader("X-HTTP-Method-Override","PATCH")}},n,o)},create:function(i,n,o){return t({url:e(this.api.create,i),type:"POST",data:JSON.stringify(i)},n,o)},destroy:function(i,n,o){return t({url:e(this.api.destroy,i),type:"POST",beforeSend:function(t){t.setRequestHeader("X-HTTP-Method-Override","DELETE")}},n,o)}})}()),xing.define("portfolio.setImgDialogDimensions",function(t){var e,i,n,o,s,r,a,l,c={hideText:!1,selectors:{content:"#content",container:"#lightbox output",cropContainer:".image-dialog",imageHolder:".image-holder",textHolder:".text-holder",image:".image-holder img",form:"#image-cropper-form",spinner:".spinner",submitButton:":submit"}},d={};if(t=$.extend(!0,{},c,t),e=t.selectors,i=t.dimensions,n=$(e.container),o=n.find(e.cropContainer),s=n.find(e.imageHolder),r=n.find(e.textHolder),n.find(e.buttons),a=t.hideText?0:r.outerWidth(!0)||0,i){var p,h,u=$(e.content),f=$("#lightbox"),g=f.css("padding-left").replace(/[^-\d\.]/g,""),m=f.css("padding-right").replace(/[^-\d\.]/g,""),v=f.css("padding-top").replace(/[^-\d\.]/g,""),y=f.css("padding-bottom").replace(/[^-\d\.]/g,""),x=parseInt(g,10)+parseInt(m,10),_=parseInt(v,10)+parseInt(y,10),b=(u.innerWidth()||u.get(0).clientWidth)-x,E=(window.innerHeight||document.documentElement.clientHeight)-_,T=i.originalWidth>i.originalHeight,O=i.originalWidth/i.originalHeight;T?(p=Math.min(i.originalWidth,b-a),h=Math.ceil(p/O)):(h=Math.min(i.originalHeight,E),p=Math.ceil(h*O)),n.find(e.image).css({width:p,height:h}),d.height=h}l=s.outerWidth(!0)||0,d.width=l+a+1,o.css(d),xing.trigger("lightbox.rePosition")}),xing.define("portfolio.trackAction",function(){function t(){if(e!==undefined)return e;var t=xing.portfolio.config.trackingMethod.split(".");return e=xing,t.forEach(function(t){e=e[t]}),e}var e;return function(e){!1!==xing.portfolio.config.tracking&&t()(e,xing.portfolio.config.trackingParameter)}}()),xing.define("portfolio.mixins.WithLoadingIndicator",{loadingIndicator:function(t){var e=this.indicator||this.$(".loading-indicator")[0]||this.$el.next()[0];e&&(e=$(e),t?(e.show().addClass("show").removeClass("hide show-image"),setTimeout(function(){e.hasClass("show")&&e.addClass("show-image")},600)):(e.removeClass("show show-image").addClass("hide"),setTimeout(function(){e.hasClass("hide")&&e.hide()},300)))}}),xing.define("portfolio.mixins.WithUploadFile",{baseConfig:{method:"POST",enctype:"multipart/form-data",target:"upload-iframe"},uploadFile:function(t,e,i,n){var o,s=$.extend({},this.baseConfig,e);o=$("<iframe/>").attr({name:this.baseConfig.target,id:this.baseConfig.target}).css({display:"none"}).appendTo("body"),t.attr(s).submit(),o.on("load",function(t){n(t,i),o.off("load"),o.remove()})}}),xing.define("portfolio.controls.CarouselLightbox",function(){var t=400;return Class.create(xing.controls.Lightbox,{template:"portfolio/lightboxes/carousel",initialize:function($super,t){$super(t),this.collection=this._filterCollection(t.collection),this.model=t.model,this.currentIndex=this.collection.indexOf(this.model),this.on("open",function(){this._bindEvents()}.bind(this)),this.on("close",function(){this._unbindEvents()}.bind(this))},_bindEvents:function(){$(document).on("keydown.carouselLightbox",this.onKeyDownCarousel.bind(this)),$(this.container).on("click.carouselLightbox",this.selectors.LEFT_BUTTON,function(){return this.move("left"),!1}.bind(this)),$(this.container).on("click.carouselLightbox",this.selectors.RIGHT_BUTTON,function(){return this.move("right"),!1}.bind(this)),$(this.container).on("swipe.carouselLightbox",function(t){return t.stopPropagation(),"right"===t.direction?this.move("left"):"left"===t.direction&&this.move("right"),!1}.bind(this))},_unbindEvents:function(){$(document).off(".carouselLightbox"),$(this.container).off(".carouselLightbox")},onKeyDownCarousel:function(t){37===t.keyCode?this.move("left"):39===t.keyCode&&this.move("right")},selectors:{CONTENT:".image-holder > *:first-child",LEFT_BUTTON:".image-holder a.left",RIGHT_BUTTON:".image-holder a.right",TEXT_BOX:".carousel-view .text-holder"},_filterCollection:function(t){return t.filter(function(t){return"Portfolio::ImageTile"===t.type||"Portfolio::VideoTile"===t.type})},move:function(t){this.collection.length<=1||("left"===t?(this.currentIndex<1?this.currentIndex=this.collection.length-1:this.currentIndex--,this.trigger("movedLeft")):"right"===t&&(this.currentIndex<this.collection.length-1?this.currentIndex++:this.currentIndex=0,this.trigger("movedRight")),this.model=this.collection[this.currentIndex],this.renderContent())},textScroller:function(){var t=$(this.container).find(this.selectors.TEXT_BOX),e=t.height()+54,i=t.parent(),n=i.height();e>n&&(t.addClass("scrollable").addClass("show-mode"),t.css({height:n-54}))},renderContent:function(){var t=HandlebarsTemplates[this.template];this.open(),this.container.html(t(this._templateData())),this._setImageDimensions({hideText:!this.model.title&&!this.model.content}),this.container.find(this.selectors.CONTENT).imagesLoaded(this._onImageLoaded.bind(this)),$(window).resize(this.position.bind(this)),this.textScroller(),this.position()},_templateData:function(){var t=$.extend({},this.model);return this.collection.length<=1&&(t.onlyTile=!0),(t.title||t.content)&&(t.hasText=!0),"Portfolio::VideoTile"===t.type&&-1!=t.embed_url.indexOf("youtube")&&(t.embed_url+="?rel=0"),t},_onImageLoaded:function(e){var i=$(e.elements[0]),n=this.container.find(".portfolio-resource-contents"),o=this.container.find(".image-holder a");(i.width()<=t||i.height()<=t)&&n.addClass("carousel-small-buttons"),i.parents("output").find(".spinner").fadeOut(),n.addClass("fade-in"),o.css({top:(i.height()-o.children().height())/2})},_setImageDimensions:function(t){var e=this.model.json_attributes;t=t||{},e&&e.versions&&(t.dimensions={originalWidth:e.versions.original.width,originalHeight:e.versions.original.height}),t.selectors={image:this.selectors.CONTENT},xing.portfolio.setImgDialogDimensions(t)}})}()),xing.define("xing.portfolio.controls.CropLightbox",function(){var t={dimensions:{minSize:250},selectors:{content:"#content",cropContainer:".crop-dialog",imageHolder:".image-holder",textHolder:".text-holder",imageToCrop:".image-to-crop",form:"#image-cropper-form",spinner:".spinner",submitButton:":submit"}};return Class.create(xing.controls.Lightbox,{initialize:function($super,e){this.config=$.extend(!0,{},t,e),this.config.cropCloseOnClickOutside="undefined"==typeof this.config.closeOnClickOutside||this.config.closeOnClickOutside,this.config.closeOnClickOutside=!1,this.on("open",this.onOpen.bind(this)),this.on("load",this.onLoad.bind(this)),this.on("close",this.onClose.bind(this)),$super(this.config),this._toggleSubmitButton(!1)},setDimensions:function(){var t,e,i,n=this.config.selectors,o=this.config.dimensions,s=$(n.content),r=this.container.find(n.cropContainer),a=$("#lightbox"),l=this.container.find(n.imageHolder),c=this.container.find(n.textHolder),d=a.css("padding-left").replace(/[^-\d\.]/g,""),p=a.css("padding-right").replace(/[^-\d\.]/g,""),h=a.css("padding-top").replace(/[^-\d\.]/g,""),u=a.css("padding-bottom").replace(/[^-\d\.]/g,""),f=parseInt(d,10)+parseInt(p,10),g=parseInt(h,10)+parseInt(u,10),m=(s.innerWidth()||s.get(0).clientWidth)-f,v=(window.innerHeight||document.documentElement.clientHeight)-g,y=o.originalWidth>o.originalHeight,x=o.originalWidth/o.originalHeight,_=c.outerWidth()||0;y?(e=Math.min(o.originalWidth,m-_),i=Math.ceil(e/x)):(i=Math.min(o.originalHeight,v),e=Math.ceil(i*x)),this.container.find(n.imageToCrop).css({width:e,height:i}),t=l.outerWidth()||0,r.css({width:t+_,height:i}),this.position(),$.extend(o,{imageWidth:e,imageHeight:i,isLandscape:y})},initializeCropping:function(){var t,e,i,n,o=this.config.dimensions,s=this.config.cropping;s?(i=parseInt(s.x,10),n=parseInt(s.y,10),e=parseInt(s.width,10),t=parseInt(s.height,10)):(e=t=Math.max(o.originalWidth/2,o.minSize),i=(o.originalWidth-e)/2,n=(o.originalHeight-t)/2),o.isLandscape?o.imageHeight<o.minSize&&(o.minSize=o.imageHeight):o.imageWidth<o.minSize&&(o.minSize=o.imageWidth),this.loadCropper(i,n,t,e)},loadCropper:function(t,e,i,n){var o=this.config.selectors,s=this.config.dimensions;new xing.utils.LazyLoader([xing.portfolio.config.lazyAssetManifests.crop],function(){this.cropper=new xing.controls.Crop(o.imageToCrop,{initialCoords:{x:t,y:e},initialWidth:n,initialHeight:i,cropForm:o.form,minSize:[s.minSize,s.minSize],trueSize:[s.originalWidth,s.originalHeight],onChange:this.onChange.bind(this),onSelect:this.onSelect.bind(this),onCropError:this.onError.bind(this),onCropSuccess:this.onSuccess.bind(this)}),this._toggleSubmitButton(!0)}.bind(this))},_toggleSubmitButton:function(t){var e=this.config.selectors;$(e.form).find(e.submitButton).attr("disabled",!t)},onOpen:function(){this.config.onOpen&&this.config.onOpen(),"undefined"!=typeof this.config.content&&this.onLoad()},onLoad:function(){var t=this.config.selectors;this.setDimensions(),$(t.form).find(t.submitButton).focus(),this.container.find(t.imageToCrop).imagesLoaded(function(){this.container.find(t.spinner).removeClass("show")}.bind(this)),this.initializeCropping(),this.container.on("mousedown",function(){this.dragging=!1}.bind(this)),this.config.cropCloseOnClickOutside&&this.dialog.on("bodyClick.force",function(){this.dragging?this.dragging=!1:this.close()}.bind(this)),this.config.onLoad&&this.config.onLoad()},onClose:function(){this.config.onClose&&this.config.onClose()},onChange:function(t){this.config.onChange&&this.config.onChange("change",t),this.trigger("change",t)},onSelect:function(){this.dragging="undefined"!=typeof this.dragging},onSuccess:function(t){this.config.onSuccess&&this.config.onSuccess("success",t),this.trigger("success",t)},onError:function(t){this.config.onError&&this.config.onError("error",t),this.trigger("error",t)}})}()),xing.define("portfolio.controls.UploadBaseLightbox",function(){return Class.create(xing.controls.Lightbox,{template:"DEFINE ME",initialize:function($super,t){this.model=t.model,$super(t)},render:function(){var t=HandlebarsTemplates[this.template],e=$.extend({},this._templateData());this.container.html(t(e)),this.$form=this.container.find("form"),this.$errorMessage=this.$form.find(".error-message"),this.$submitButton=this.$form.find("[type=submit]"),this.position(),this._bindEvents()},_bindEvents:function(){this._eventsBinded||(this.container.on("submit.lightbox","form",this.submit.bind(this)),this._eventsBinded=!0);var t=this.container.find(".icn-ext-ctr-info");t.length>0&&new xing.controls.TutorialBubble(t,"info-layer",xing.i18n.t("PORTFOLIO_INFOBOX_EDIT"),{opened:!1,position:"below"})},cancel:function(){this.trigger("cancel",this.model)},_showErrorMessage:function(t){this.$submitButton.attr("disabled",!1),t&&(this._defaultErrorMessage=this.$errorMessage.html(),this.$errorMessage.html(t)),this.$errorMessage.show()},_hideErrorMessage:function(){this.$errorMessage.hide(),this._defaultErrorMessage&&this.$errorMessage.html(this._defaultErrorMessage)},submit:function(t){t.stopPropagation(),t.preventDefault(),this.$submitButton.attr("disabled",!0),this._hideErrorMessage();var e=this.$form.find("[name=title]"),i=this.$form.find("[name=content]");e.length&&(this.model.title=e.val()),i.length&&(this.model.content=i.val()),!this.config.validation||this.config.validation(this.model)?this.trigger("save",this.model):this._showErrorMessage()}})}()),xing.define("portfolio.controls.ImageDetailsLightbox",function(){var t=".image-holder > *:first-child";return Class.create(xing.portfolio.controls.UploadBaseLightbox,{template:"portfolio/lightboxes/image_details",_templateData:function(){return $.extend({editMode:!this.config.uploadMode},this.model,this.model.json_attributes)},open:function($super,e){$super(e),this._setImageDimensions(),this.container.find(t).imagesLoaded(this._onImageLoaded.bind(this)),this.position()},_bindEvents:function($super){$super();var t=this.config.onCrop;t&&this.container.find("#crop-image").on("click",function(){t()})},_onImageLoaded:function(t){var e=$(t.elements[0]),i=this.container.find(".portfolio-resource-contents");e.parents("output").find(".spinner").hide(),i.addClass("fade-in")},_setImageDimensions:function(e){var i=this.model.json_attributes;e=e||{},i&&i.versions&&(e.dimensions={originalWidth:i.versions.original.width,originalHeight:i.versions.original.height}),e.selectors={image:t},xing.portfolio.setImgDialogDimensions(e)}})}()),
xing.define("portfolio.controls.LimitLightbox",function(){return Class.create(xing.controls.Lightbox,{template:HandlebarsTemplates["portfolio/lightboxes/limit"],initialize:function($super,t){t=t||{},this.limitType=t.limitType,$super(t)},render:function(){var t,e=xing.portfolio.config.fencing,i="PORTFOLIO_LIMIT_DIALOG_TEXT";xing.portfolio.config.splitLimitsErrors&&("video"===this.limitType?i="PORTFOLIO_VIDEO_LIMIT_DIALOG_TEXT":"asset"===this.limitType&&(i="PORTFOLIO_ASSET_LIMIT_DIALOG_TEXT")),t={errorMessage:xing.i18n.t(i,{limit:e.maxAssetTilesCount,videoLimit:e.maxVideoTilesCount})},this.container.html(this.template(t)),this.position()}})}()),xing.define("portfolio.controls.PdfUploadLightbox",function(){return Class.create(xing.portfolio.controls.UploadBaseLightbox,{template:"portfolio/lightboxes/pdf_details",_bindEvents:function($super){$super(),this.container.on("keyup","input[name=title]",this._onTitleChanged.bind(this))},_onTitleChanged:function(t){var e=$(t.target),i=e.val()||e.attr("placeholder");this.model.title=e.val(),this.container.find(".pdf-icon-holder span").text(i)},_templateData:function(){return this.model}})}()),xing.define("portfolio.controls.PortfolioPackery",Class.create({initialize:function(t){this.config=t,this.container=$(t.container),this.collection=t.collection,this.render()},render:function(){this.packery&&"function"==typeof this.packery.destroy&&this.packery.destroy(),this.packery=new Packery(this.container[0],{columnWidth:200,isInitLayout:!1}),this.draggieInstances=[],this.config.allowDragAndDrop?(this.initDragAndDrop(),this.packery.on("dragItemPositioned",this._relayout.bind(this))):this.config.hasLayout&&this.stampGridItems(),this.packery.layout()},_onLayoutComplete:function(){this.config.onLayoutComplete&&this.config.onLayoutComplete()},_relayout:function(){this.packery.once("layoutComplete",this._onLayoutComplete.bind(this)),window.setTimeout(this.packery.layout.bind(this.packery),1)},addItem:function(t){this.packery.addItems(t),this._relayout(),this._makeElementDraggable(t)},removeItem:function(t){this.packery.once("removeComplete",this.layout.bind(this)),this.packery.remove(t)},reloadItem:function(t){this.packery.reloadItems(),this._makeElementDraggable(t)},layout:function(){this.unstampGridItems(),this.packery.once("layoutComplete",this._onLayoutComplete.bind(this)),this.packery.layout()},_makeElementDraggable:function(t){var e=new Draggabilly(t,{containment:".portfolio-container",handle:".drag-handle"});return this.draggieInstances.push(e),this.packery.bindDraggabillyEvents(e),e.on("dragStart",this.bringTileToFront.bind(this)),e.on("dragEnd",this.bringTileToBack.bind(this)),e.on("dragMove",this.config.onGridDragMove.bind(this)),e},initDragAndDrop:function(){this.packery.getItemElements().forEach(function(t){var e=this._makeElementDraggable(t);this.config.hasLayout&&(e.on("dragStart",this.unstampGridItems.bind(this)),this.packery.stamp(t))},this)},bringTileToBack:function(t){$(t.element).css("z-index","auto")},bringTileToFront:function(t){$(t.element).css("z-index",20)},stampGridItems:function(){this.packery.getItemElements().forEach(function(t){this.packery.stamp(t)}.bind(this)),this.draggieInstances.forEach(function(t){t.on("dragStart",this.unstampGridItems.bind(this))})},unstampGridItems:function(){var t=this.packery.getItemElements();this.draggieInstances.forEach(function(t){t.off("dragStart")}),t.forEach(function(t){this.packery.unstamp(t)}.bind(this))},getGridCoords:function(){return this.packery.getItemElements().map(function(t,e){t=$(t);var i=t.position();return{id:t.data("tile-id"),index:e,x:i.left,y:i.top}})}})),xing.define("portfolio.controls.TextUploadLightbox",function(){return Class.create(xing.portfolio.controls.UploadBaseLightbox,{template:"portfolio/lightboxes/text_upload",_templateData:function(){return $.extend({},this.model)}})}()),xing.define("portfolio.controls.UploadLightbox",function(){return Class.create(xing.controls.Lightbox,{render:function(){var t=HandlebarsTemplates["portfolio/lightboxes/choose_upload"],e={authenticityToken:xing.portfolio.config.authenticityToken,allowing_video:!xing.portfolio.config.disableVideo,allowing_pdf:!xing.portfolio.config.disablePdf,choiceHintPicture:new Handlebars.SafeString(xing.i18n.t("PORTFOLIO_CHOICE_HINT_PICTURE",{numItems:xing.portfolio.config.fencing.maxAssetTilesCount,maxSize:xing.portfolio.config.fencing.maxAssetSize})),choiceHintPdf:new Handlebars.SafeString(xing.i18n.t("PORTFOLIO_CHOICE_HINT_PDF",{numItems:xing.portfolio.config.fencing.maxAssetTilesCount,maxSize:xing.portfolio.config.fencing.maxAssetSize})),choiceHintVideo:new Handlebars.SafeString(xing.i18n.t("PORTFOLIO_CHOICE_HINT_VIDEO",{numItems:xing.portfolio.config.fencing.maxVideoTilesCount})),choiceHintVideoUpsell:new Handlebars.SafeString(xing.i18n.t("PORTFOLIO_CHOICE_HINT_VIDEO_UPSELL",{href:'href="/upsell/premium?op=premium_overview;reagent=uplt_151"'}))};this.container.html(t(e)),this.position(),this._bindEvents()},_bindEvents:function(){this.config.bindEvents&&this.config.bindEvents({text:this.container.find(".portfolio-upload-text"),video:this.container.find(".portfolio-upload-video"),image:this.container.find(".portfolio-upload-picture input[type=file]"),pdf:this.container.find(".portfolio-upload-pdf input[type=file]")})}})}()),xing.define("portfolio.controls.VideoUploadLightbox",function(){return Class.create(xing.portfolio.controls.UploadBaseLightbox,{template:"portfolio/lightboxes/video_upload",_templateData:function(){return $.extend({imageLoaded:!!this.model.embed_url},this.model)},render:function($super){$super(),this.loadingVideoIndicator=this.container.find(".loading-video"),this.container.find("input:visible").focus()},_bindEvents:function($super){$super(),this.container.on("keyup","input[name=link]",function(t){t.which!==$.keyCodes.KEY_RETURN&&this._onLinkChanged()}.bind(this)),this.container.on("paste","input[name=link]",function(){this._onLinkChanged()}.bind(this))},_allowProfileTracking:function(){return $("#portfolio-tab").length>0},_onLinkChanged:function(){clearTimeout(this._linkChangeTimeout),this._linkChangeTimeout=setTimeout(function(){var t=this.$form.find("[name=link]:visible").val();t&&t!==this.model.link&&(this.model={link:t,type:this.model.type},this.trigger("modelLinkChanged",this.model),this.loadingVideoIndicator.show(),this._isLoading=!0,this._hideErrorMessage())}.bind(this),500)},videoLoaded:function(t,e){this.loadingVideoIndicator.hide(),this._isLoading=!1,t?this._showErrorMessage(!0!==t?t:""):(this._hideErrorMessage(),this.model=e,this._workingModel=this.model,-1!=this._workingModel.embed_url.indexOf("youtube")&&(this._workingModel.embed_url+="?rel=0"),this._checkImageStep())},_checkImageStep:function(){this.render(),this._setVideoDimensions(),this.position(),this._allowProfileTracking()&&ttt.event("PropTrackAction",{PropTrackAction:"profile_self_editing_portfolio_video_check_view"})},submit:function($super,t){this._isLoading||!this._workingModel?(t.preventDefault(),t.stopPropagation()):(this.model=this._workingModel,$super(t))},_setVideoDimensions:function(){var t=this.model.json_attributes;this.container.find("iframe").css({width:t.versions.original.width,height:t.versions.original.height})}})}()),xing.define("portfolio.api.portfolio",{update:function(){var t=xing.portfolio.config;return t.holderPath+t.api.persistGrid}}),xing.define("portfolio.models.Tile",function(){return Class.create({initialize:function(t){$.extend(this,t)}})}()),xing.define("portfolio.api.tiles",{constructor:xing.portfolio.models.Tile,index:function(){return xing.portfolio.config.holderPath+xing.portfolio.config.api.tiles},create:function(t){var e={"Portfolio::TextTile":xing.portfolio.config.api.textTiles,"Portfolio::ImageTile":xing.portfolio.config.api.imageTiles,"Portfolio::PdfTile":xing.portfolio.config.api.pdfTiles,"Portfolio::VideoTile":xing.portfolio.config.api.videoTiles};return xing.portfolio.config.holderPath+e[t.type]},read:function(t){return xing.portfolio.config.holderPath+xing.portfolio.config.api.tiles+"/"+t.id},update:function(t){return xing.portfolio.config.holderPath+xing.portfolio.config.api.tiles+"/"+t.id},destroy:function(t){return xing.portfolio.config.holderPath+xing.portfolio.config.api.tiles+"/"+t.id}}),xing.define("portfolio.collections.Tiles",function(){return function(t){var e=$.extend(t,{hasLayout:function(){return this.every(function(t){return t.x!==undefined&&t.y!==undefined&&-1!==t.x&&-1!==t.y})},getById:function(t){var e;return t=parseInt(t,10),this.some(function(i){i.id===t&&(e=i)}),e},updateItem:function(t){return $.extend(this.getById(t.id),t)},updateGridCoordinates:function(t){t.forEach(function(t){var e=this.getById(t.id);e&&$.extend(e,{index:t.index,x:t.x,y:t.y})}.bind(this)),this.sort(this.comparator)},comparator:function(t,e){var i=t.x,n=e.x,o=t.y,s=e.y;return-1!==i&&-1!==o||-1!==n&&-1!==s?-1===i||-1===o?1:-1===n||-1===s?-1:o<s?-1:o===s?i<n?-1:i===n?0:1:1:0}});return xing.mixIn(e,xing.traits.EventEmitterTrait),e}}()),xing.define("portfolio.views.Tiles",Class.create($.extend({},xing.portfolio.mixins.WithLoadingIndicator,{template:HandlebarsTemplates["portfolio/tiles"],initialize:function(t){this.container=$(t.container),this.collection=t.collection,this.onRender=t.onRender,this.indicator=this.container.next(),this.config=t},render:function(){return this.container.html(this.template(this._templateData())),this.loadingIndicator(!1),xing.utils.Behaviors.update(this.container),this.container.find(".description-wrapper ul").addClass("bullet-list"),this.onRender&&this.onRender(),this.collection.length&&this.initPackery(),this},updateContainerLimitClass:function(t){var e=xing.portfolio.fencing.checkLimits(this.collection);"Portfolio::ImageTile"!==t.type&&"Portfolio::PdfTile"!==t.type||!1!==e.downgradeOverLimitImageAndPdf||this._removeContainerClass("overlimit-image-pdf"),"Portfolio::TextTile"===t.type&&!1===e.downgradeOverLimitImageAndPdf&&this._removeContainerClass("overlimit-text")},_removeContainerClass:function(t){this.container.find("#portfolio-tab").removeClass(t)},getGridCoords:function(){return this.portfolioGrid.getGridCoords()},rerenderTile:function(t){var e=this._getTileElementById(t.id),i=HandlebarsTemplates["portfolio/tiles/tile"];return e.html($(i(t)).html()),xing.utils.Behaviors.update(this.container),this.portfolioGrid&&(this.portfolioGrid.reloadItem(e[0]),this.portfolioGrid.layout()),e},renderTile:function(t){var e=HandlebarsTemplates["portfolio/tiles/tile"],i=$(e(t));return i.appendTo(this.container.find(".tiles-container > ul")),xing.utils.Behaviors.update(this.container),this.portfolioGrid&&this.portfolioGrid.addItem(i[0]),i},deleteTile:function(t){this.portfolioGrid.removeItem(this._getTileElementById(t.id))},showTileAsDeleted:function(t){this._getTileElementById(t.id).addClass("deleted")},initPackery:function(){var t=xing.portfolio.config.editable,e=xing.portfolio.fencing.checkLimits(this.collection);this.collection.length&&(this.portfolioGrid=new xing.portfolio.controls.PortfolioPackery({container:this.container.find(".tiles-container ul"),allowDragAndDrop:t&&!e.downgradeOverLimitImageAndPdf&&!e.downgradeOverLimitVideo&&!e.downgradeOverLimitText,hasLayout:this.collection.hasLayout(),persistGrid:this.config.persistGrid,onLayoutComplete:this.config.onLayoutComplete,onGridDragMove:this.config.onGridDragMove}))},_getTileElementById:function(t){return this.container.find("[data-tile-id='"+t+"']")},_templateData:function(){var t=xing.portfolio.fencing.checkLimits(this.collection),e=xing.portfolio.config.fencing;return{allowing_video:!xing.portfolio.config.disableVideo,allowing_pdf:!xing.portfolio.config.disablePdf,empty:!this.collection.length,basic:xing.portfolio.config.basic,isOverLimit:t.anyLimitReached,overLimitMessage:new Handlebars.SafeString(xing.i18n.t("PORTFOLIO_UPGRADE_MESSAGE_WITH_NO_VIDEO",{max_file_number:30,max_video_number:15})),downgradeOverLimitImageAndPdf:t.downgradeOverLimitImageAndPdf,downgradeOverLimitVideo:t.downgradeOverLimitVideo,downgradeOverLimitText:t.downgradeOverLimitText,fencingTextError:xing.i18n.t("PORTFOLIO_FENCING_TEXT_ERROR_SINGULAR"),fencingAssetError:new Handlebars.SafeString(xing.i18n.t("PORTFOLIO_FENCING_ASSET_ERROR",{max_count:e.maxAssetTilesCount})),fencingVideoError:new Handlebars.SafeString(xing.i18n.t("PORTFOLIO_FENCING_VIDEO_ERROR",{max_count:e.maxVideoTilesCount})),collection:this.collection.sort(this.collection.comparator)}}}))),xing.define("portfolio.BaseUploader",function(){function t(t,e){return $.isFunction(t)?t(e):t}var e=Class.create({type:"OVERRIDE ME",initialize:function(t){this.fileInput=$(t.fileInput),this.form=this.fileInput.closest("form"),this.api=t.api},run:function(e){this.callback=e,this.error=null,this.isValid()?this.uploadFile(this.form,{action:t(this.api.create,{type:this.type}),file:this.fileInput.val()},null,this._handleOnUploadInIFrame.bind(this)):this.callback(this.error)},_handleOnUploadInIFrame:function(t){var e,i=$.parseJSON($(t.currentTarget).contents().find("pre").text()),n=i&&i.errors;if(n&&(e=n.mime_type||n.base||n.asset))return void this.callback(e.join(" "));this.callback(null,i)},isValid:function(){throw new Error("Implement validation in subclass")}});return Class.mixIn(e,xing.portfolio.mixins.WithUploadFile),Class.mixIn(e,xing.traits.EventEmitterTrait),e}()),xing.define("portfolio.ImageUploader",function(){var t=/\.(jpg|jpeg|png|bmp)$/i;return Class.create(xing.portfolio.BaseUploader,{type:"Portfolio::ImageTile",isValid:function(){var e,i=this.fileInput.val();return this.fileInput[0].files&&(e=this.fileInput[0].files[0].size),t.test(i.toLowerCase())?!(e&&e>1024*xing.portfolio.config.fencing.maxAssetSize*1024)||(this.error=xing.i18n.t("PORTFOLIO_IMG_ERROR_FILESIZE",{size:xing.portfolio.config.fencing.maxAssetSize}),!1):(this.error=xing.i18n.t("PORTFOLIO_IMG_ERROR_TYPE"),!1)}})}()),xing.define("portfolio.PdfUploader",function(){return Class.create(xing.portfolio.BaseUploader,{type:"Portfolio::PdfTile",isValid:function(){var t,e=this.fileInput.val();return this.fileInput[0].files&&(t=this.fileInput[0].files[0].size),/\.(pdf)$/gi.test(e.toLowerCase())?!(t&&t>1024*xing.portfolio.config.fencing.maxAssetSize*1024)||(this.error=xing.i18n.t("PORTFOLIO_PDF_ERROR_FILESIZE",{size:xing.portfolio.config.fencing.maxAssetSize}),!1):(this.error=xing.i18n.t("PORTFOLIO_PDF_ERROR_TYPE"),!1)}})}());const trackingType={"Portfolio::ImageTile":"image","Portfolio::TextTile":"textbox","Portfolio::VideoTile":"video","Portfolio::PdfTile":"pdf"};xing.define("portfolio.controllers.Portfolio",function(){return Class.create({events:{"click .portfolio-add-btn":"showUploader","mouseleave .text-tile, .image-tile, .pdf-tile":"fadeOutMenu","click .tiles-container .dropdown li":"onDropdownSelect","click .tiles-container .tile-action-enlarge":"resizeTile","click .tiles-container .tile-action-minimize":"resizeTile","click .tiles-container .tile-action-edit":"editTile","click .tiles-container .tile-action-delete":"deleteTile","tap .tiles-container .tile-action-enlarge":"resizeTile","tap .tiles-container .tile-action-minimize":"resizeTile","tap .tiles-container .tile-action-edit":"editTile","tap .tiles-container .tile-action-delete":"deleteTile","click .tiles-container .open-tile":"showCarousel","tap .tiles-container .open-tile":"showCarousel"},initialize:function(t,e){this.container=$(t),this.config=e,this.collection=e.tiles,this.holderId=xing.portfolio.config.holderId,this.restSync=new xing.portfolio.RestSync(xing.portfolio.api.tiles),this.uploadController=new xing.portfolio.controllers.Upload({collection:this.collection}),this._createView(),this._bindEvents()},_allowProfileTracking:function(){return $("#portfolio-tab").length>0},_createView:function(){this.view=new xing.portfolio.views.Tiles({container:this.container,collection:this.collection,persistGrid:this.persistGrid.bind(this),onLayoutComplete:this.onLayoutComplete.bind(this),onGridDragMove:this.onGridDragMove.bind(this),onRender:this._onRenderView.bind(this)}),this.view.render();try{xing.define("profiles.views.content",this.view)}catch(t){}},_onRenderView:function(){var t=this.container.find(".portfolio-container");Object.keys(this.events).forEach(function(e){var i=this.events[e],n=e.split(" ",2);t.on(n[0],e.substr(n[0].length),this[i].bind(this))}.bind(this)),this.collection.length||this._bindEventsForEmpty()},_bindEvents:function(){this.collection.on("changed",this._onTileChanged.bind(this)),this.collection.on("created",this._onTileCreated.bind(this))},_onTileCreated:function(t,e){1===this.collection.length?this.view.render():this.view.renderTile(e)},_onTileDeleted:function(t){0===this.collection.length?this.view.render():this.view.deleteTile(t)},_onTileChanged:function(t,e){this.view.rerenderTile(e)},_bindEventsForEmpty:function(){this.uploadController.bindUploadEvents({text:this.container.find(".portfolio-upload-text"),video:this.container.find(".portfolio-upload-video"),image:this.container.find(".portfolio-upload-picture input[type=file]"),pdf:this.container.find(".portfolio-upload-pdf input[type=file]")})},showCarousel:function(t){var e,i=$(t.currentTarget).parents("li"),n=this.collection.getById(i.data("tile-id"));if(t.preventDefault(),this.justDraggedGrid)return void(this.justDraggedGrid=!1);e=new xing.portfolio.controls.CarouselLightbox({collection:this.collection,model:n}),e.on("movedLeft",function(){xing.portfolio.trackAction("clicksInCarouselBack")}),e.on("movedRight",function(){xing.portfolio.trackAction("clicksInCarouselNext")}),e.renderContent(),xing.portfolio.trackAction("openCarousel")},showUploader:function(){this.uploadController.openChooser(),xing.portfolio.trackAction("addPortfolioItem")},fadeOutMenu:function(t){var e="undefined"==typeof t.currentTarget?t:$(t.currentTarget),i=e.find(".tile-actions-trigger");i.hasClass("active")&&($(e.element).css("z-index","auto"),i.removeClass("active"),xing.trigger("xing_layer.close_layer"))},onDropdownSelect:function(t){var e=$(t.currentTarget);e.hasClass("tile-action-download-pdf")||t.preventDefault(),this.fadeOutMenu(e.closest("[data-tile-id]"))},resizeTile:function(t){var e,i,n,o=$(t.currentTarget),s=$(o.parents("[data-tile-id]")),r=$(s.find(".image-tile-source")[0]),a=s.attr("data-tile-id"),l=xing.portfolio.fencing.checkLimits(this.collection);return o.hasClass("tile-action-enlarge")?(e="thumbnail1x1",i="thumbnail2x2"):(e="thumbnail2x2",i="thumbnail1x1"),n=this.collection.getById(a),!("Portfolio::ImageTile"===n.type&&l.downgradeOverLimitImageAndPdf||"Portfolio::PdfTile"===n.type&&l.downgradeOverLimitImageAndPdf||"Portfolio::VideoTile"===n.type&&l.downgradeOverLimitVideo)&&(n.json_attributes.overview=i,this.restSync.update(n),s.removeClass(e).addClass(i),r.attr("src",n.asset[i].url),s.find(".tile-action-enlarge, .tile-action-minimize").toggle(),this.layoutAfterEdit(),xing.portfolio.trackAction("maxAndMinimizeImage"),!0)},editTile:function(t){var e=this._getModelFromTileEvent(t),i=xing.portfolio.fencing.checkLimits(this.collection);return!("Portfolio::ImageTile"===e.type&&i.downgradeOverLimitImageAndPdf||"Portfolio::PdfTile"===e.type&&i.downgradeOverLimitImageAndPdf||"Portfolio::TextTile"===e.type&&i.downgradeOverLimitText||"Portfolio::VideoTile"===e.type&&i.downgradeOverLimitVideo)&&(this.uploadController.openEditDialog(e),xing.portfolio.trackAction("editPortfolioItem"),!0)},deleteTile:function(t){var e=this._getModelFromTileEvent(t);this.view.showTileAsDeleted(e),this.restSync.destroy(e,function(){this.collection.splice(this.collection.indexOf(e),1),this._onTileDeleted(e),this.view.updateContainerLimitClass(e),xing.portfolio.trackAction("deletePortfolioItem")}.bind(this)),this._allowProfileTracking()&&ttt.event("EventProfileEditingDelete",{EventProfileEditingDelete:1,PropActionOrigin:"profile_self_editing_portfolio_"+trackingType[e.type]})},_getModelFromTileEvent:function(t){var e=$(t.currentTarget),i=$(e.parents("[data-tile-id]")),n=i.attr("data-tile-id");return this.collection.getById(n)},layoutAfterEdit:function(){this.view.portfolioGrid&&this.view.portfolioGrid.layout()},onGridDragMove:function(){this.justDraggedGrid=!0},persistGrid:function(){var t=this.view.getGridCoords();this.collection.updateGridCoordinates(t),new xing.portfolio.RestSync(xing.portfolio.api.portfolio).update({portfolio:{tile_positions:t}})},onLayoutComplete:function(){this.persistGrid()},uploadText:function(t){this.uploadController.openUploadTextDialog(t)},uploadVideo:function(t){this.uploadController.openUploadVideoDialog(t)},resetFileInput:function(t){this.uploadController.resetFileInput(t)},uploadImage:function(t){this.uploadController.openUploadImageDialog(t)},uploadPdf:function(t){this.uploadController.openUploadPdfDialog(t)}})}()),xing.define("portfolio.controllers.Upload",function(){return Class.create({initialize:function(t){this.collection=t.collection,this.lightboxTargetId=xing.appMessagesTargetProvider.register("lightbox"),this.restSync=new xing.portfolio.RestSync(xing.portfolio.api.tiles),xing.on("lightbox.open",function(){this.appMessageTargetId=this.lightboxTargetId}.bind(this)),xing.on("lightbox.close",function(){xing.trigger("app_messages.clear",this.appMessageTargetId),delete this.appMessageTargetId}.bind(this))},_allowProfileTracking:function(){return $("#portfolio-tab").length>0},openChooser:function(){this.lightbox=new xing.portfolio.controls.UploadLightbox({bindEvents:this.bindUploadEvents.bind(this)})},bindUploadEvents:function(t){t.text.on("click",this.openUploadTextDialog.bind(this)),t.video.on("click",this.openUploadVideoDialog.bind(this)),t.image.on("click",this.resetFileInput.bind(this)),t.pdf.on("click",this.resetFileInput.bind(this)),t.image.on("change",this.openUploadImageDialog.bind(this)),t.pdf.on("change",this.openUploadPdfDialog.bind(this))},resetFileInput:function(t){var e=$(t.currentTarget),i=$(t.currentTarget).parent("form").data("type");xing.portfolio.fencing.checkLimits(this.collection).limitReachedImageAndPdf&&(t.preventDefault(),this._limitReached("asset")),e.val(null),this._allowProfileTracking()&&ttt.event("PropTrackAction",{PropTrackAction:"profile_self_editing_"+i+"_add_view"})},_limitReached:function(t){xing.portfolio.config.basic?this.goToUpSellPage():new xing.portfolio.controls.LimitLightbox({limitType:t})},_showError:function(t){xing.trigger("app_messages.create",{messageType:"error",messageSummary:t,targetId:this.appMessageTargetId||undefined})},_createNewModel:function(t){return{content:"",title:"",type:t}},openEditTextDialog:function(t){var e=this;e._openTextDialog(t,function(t){e.restSync.update(t,function(t){e.collection.updateItem(t),e.collection.trigger("changed",t),e.lightbox.close()})}),this._allowProfileTracking()&&ttt.event("EventProfileEditingOpen",{EventProfileEditingOpen:1,PropContextDimension3:"profile_self_editing_portfolio_textbox_edit",PropActionOrigin:"profile_self_editing_portfolio_textbox"})},openUploadTextDialog:function(){var t=xing.portfolio.fencing.checkLimits(this.collection),e=this;if(t.limitReachedText)return e._limitReached("text");e._openTextDialog(e._createNewModel("Portfolio::TextTile"),function(t){e.restSync.create(t,function(t){e.collection.push(t),e.collection.trigger("created",t),e.lightbox.close()})}),e._allowProfileTracking()&&ttt.event("EventProfileEditingOpen",{EventProfileEditingOpen:1,PropContextDimension3:"profile_self_editing_portfolio_textbox_add",PropActionOrigin:"profile_self_editing_portfolio_textbox"})},_openTextDialog:function(t,e){var i=this;i.lightbox=new xing.portfolio.controls.TextUploadLightbox({collection:i.collection,model:t,validation:function(t){return t.title||t.content}}),i.lightbox.on("save",function(t,n){e(n),i._allowProfileTracking()&&ttt.event("EventProfileEditingSave",{EventProfileEditingSave:1,PropActionOrigin:"profile_self_editing_portfolio_textbox"})}),i.lightbox.on("cancel",function(){i.lightbox.close()}),xing.portfolio.trackAction("addPortfolioItemText")},openUploadVideoDialog:function(){var t=xing.portfolio.fencing.checkLimits(this.collection),e=this;if(e._allowProfileTracking()&&ttt.event("EventProfileEditingOpen",{EventProfileEditingOpen:1,PropContextDimension3:"profile_self_editing_portfolio_video_add",PropActionOrigin:"profile_self_editing_portfolio_video"}),t.limitReachedVideo)return e._limitReached("video");e.lightbox=new xing.portfolio.controls.VideoUploadLightbox({collection:e.collection,model:e._createNewModel("Portfolio::VideoTile"),validation:function(t){return t.link}}),e.lightbox.on("modelLinkChanged",function(t,i){function n(t){e.lightbox.videoLoaded(null,t)}function o(t){var i=t.responseJSON;i&&i.errors&&i.errors.base?e.lightbox.videoLoaded(i.errors.base.join(", ")):e.lightbox.videoLoaded(!0)}e.restSync.create(i,n,o)}),e.lightbox.on("save",function(t,i){e.openUploadImageVideoDetailDialog(i,!0)}),e.lightbox.on("cancel",function(){e.lightbox.close()}),xing.portfolio.trackAction("addPortfolioItemVideo")},_waitForImageUntilProcessed:function(t,e){var i=this;"active"!==t.tile_state?i.restSync.find(t,function(t){setTimeout(function(){i._waitForImageUntilProcessed(t,e)},2e3)}):e(t)},_openImageVideoCropDialog:function(t,e,i){var n=this,o=t.json_attributes,s=o.cropping,r=o.versions.original,a=xing.portfolio.config;s=s?{x:s.x1,y:s.y1,width:s.width,height:s.height}:null,this.lightbox=new xing.portfolio.controls.CropLightbox({content:HandlebarsTemplates["portfolio/lightboxes/crop"]($.extend({editMode:!e},t,{cropUrl:a.holderPath+a.api.imageTiles+"/"+t.id+"/crop"})),cropping:s,dimensions:{originalWidth:r.width,originalHeight:r.height,minSize:190}}),this.lightbox.on("success",function(t,e){i(e),n._allowProfileTracking()&&ttt.event("EventProfileEditingSave",{EventProfileEditingSave:1,PropActionOrigin:"profile_self_editing_portfolio_"+trackingType[e.type]})}.bind(this))},openUploadImageVideoDetailDialog:function(t,e){var i=this;i.lightbox=new xing.portfolio.controls.ImageDetailsLightbox({model:t,uploadMode:!0}),i.lightbox.on("save",function(t,n){i.restSync.update(n,function(t){i.collection.push(t),e||i.collection.trigger("changed",t),i.openUploadImageVideoCropDialog(t)})}),i.lightbox.on("cancel",function(){i.lightbox.close()}),this._allowProfileTracking()&&("Portfolio::VideoTile"===t.type?ttt.event("PropTrackAction",{PropTrackAction:"profile_self_editing_portfolio_video_description_view"}):ttt.event("EventProfileEditingOpen",{EventProfileEditingOpen:1,PropContextDimension3:"profile_self_editing_portfolio_image_add",PropActionOrigin:"profile_self_editing_portfolio_image"}))},openUploadImageVideoCropDialog:function(t){var e=this;e._allowProfileTracking()&&("Portfolio::VideoTile"===t.type?ttt.event("PropTrackAction",{PropTrackAction:"profile_self_editing_portfolio_video_crop_view"}):ttt.event("PropTrackAction",{PropTrackAction:"profile_self_editing_portfolio_image_crop_view"})),e._openImageVideoCropDialog(t,!0,function(t){e.restSync.update(t,function(t){e._waitForImageUntilProcessed(t,function(t){e.collection.updateItem(t),e.collection.trigger("created",t),e.lightbox.close()})})})},openEditImageVideoDialog:function(t){var e,i=this;i.lightbox=new xing.portfolio.controls.ImageDetailsLightbox({model:t}),i.lightbox.on("save",function(t,e){i.restSync.update(e,function(t){i.collection.updateItem(t),i.collection.trigger("changed",t),i.openEditCropImageVideoDialog(t)})}),i.lightbox.on("cancel",function(){i.lightbox.close()}),i._allowProfileTracking()&&(e={EventProfileEditingOpen:1,PropContextDimension3:"profile_self_editing_portfolio_"+trackingType[t.type]+"_edit",PropActionOrigin:"profile_self_editing_portfolio_"+trackingType[t.type]},"Portfolio::VideoTile"===t.type&&$.extend(e,{PropTrackAction:"profile_self_editing_portfolio_video_description_view"}),ttt.event("EventProfileEditingOpen",e))},openEditCropImageVideoDialog:function(t){var e=this;e._openImageVideoCropDialog(t,!1,function(t){e.restSync.update(t,function(t){e._waitForImageUntilProcessed(t,function(t){e.collection.updateItem(t),e.collection.trigger("changed",t),e.lightbox.close()})})}),e._allowProfileTracking()&&ttt.event("PropTrackAction",{PropTrackAction:"profile_self_editing_portfolio_"+trackingType[t.type]+"_crop_view"})},openUploadImageDialog:function(t){this._uploadDialog(xing.portfolio.ImageUploader,t.target,function(t){this.openUploadImageVideoDetailDialog(t,!0)}.bind(this)),xing.portfolio.trackAction("addPortfolioItemImage")},openUploadPdfDialog:function(t){this._uploadDialog(xing.portfolio.PdfUploader,t.target,function(t){t&&(this.openUploadPdfDialogStep2(t),this._allowProfileTracking()&&ttt.event("EventProfileEditingOpen",{EventProfileEditingOpen:1,PropContextDimension3:"profile_self_editing_portfolio_pdf_add",PropActionOrigin:"profile_self_editing_portfolio_pdf"}))}.bind(this)),xing.portfolio.trackAction("addPortfolioItemPDF")},openUploadPdfDialogStep2:function(t){var e=this;e.lightbox=new xing.portfolio.controls.PdfUploadLightbox({collection:e.collection,model:t,validation:function(t){return t.title}}),e.lightbox.on("save",function(t,i){ttt.event("EventProfileEditingSave",{EventProfileEditingSave:1,PropActionOrigin:"profile_self_editing_portfolio_pdf"}),e.restSync.update(i,function(t){e.collection.push(t),e.collection.trigger("created",t),e.lightbox.close()})}),e.lightbox.on("cancel",function(){e.lightbox.close()})},_uploadDialog:function(t,e,i){new t({fileInput:e,api:xing.portfolio.api.tiles}).run(function(t,e){t?this._showError(t):i(e)}.bind(this))},openEditDialog:function(t){({"Portfolio::ImageTile":this.openEditImageVideoDialog,"Portfolio::VideoTile":this.openEditImageVideoDialog,"Portfolio::TextTile":this.openEditTextDialog})[t.type].call(this,t)},goToUpSellPage:function(){$("body").empty(),window.location="/app/billing?op=premium_overview;reagent=uplt_151"}})}()),xing.define("portfolio.init",function(t){xing.portfolio.config.iPad=null!==navigator.userAgent.match(/iPad/i),xing.portfolio.config.iPad&&(xing.portfolio.config.iOS={4:!!navigator.userAgent.match(/iPad; CPU OS 4/i),5:!!navigator.userAgent.match(/iPad; CPU OS 5/i),6:!!navigator.userAgent.match(/iPad; CPU OS 6/i),7:!!navigator.userAgent.match(/iPad; CPU OS 7/i),8:!!navigator.userAgent.match(/iPad; CPU OS 8/i)}),xing.portfolio.touch="ontouchstart"in document.documentElement,xing.portfolio.touch&&$("body").addClass("touch"),t&&t()});